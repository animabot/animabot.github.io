<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>ANIMA: reslice_nii.m Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://www.mathjax.org/mathjax/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ANIMA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_5ce0a585544ccf90f6c4541b827e0dfc.html">anima-nightly-src</a></li><li class="navelem"><a class="el" href="dir_0fad36fe10bbcca9e7c6f0593f8115a7.html">filtering</a></li><li class="navelem"><a class="el" href="dir_a8c965e58a3e16f0722aea8ebc1f2ff0.html">nyul_standardization</a></li><li class="navelem"><a class="el" href="dir_369872ed032a3cd8f5543300e1c0f96c.html">matlab_intensity_standardization</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">reslice_nii.m</div>  </div>
</div><!--header-->
<div class="contents">
<a href="reslice__nii_8m.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;%  The basic application of the <span class="stringliteral">&#39;reslice_nii.m&#39;</span> <a class="code" href="xform__nii_8m.html#a680b8190fb01103a563c5586524b8874">program</a> is to perform</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;%  any 3D affine <a class="code" href="xform__nii_8m.html#a35e6130bb6ae8c0bbc86ae3e894b4222">transform</a> defined by <a class="code" href="reslice__nii_8m.html#a1ede835792071dff91c0e008e7c3b16a">a</a> NIfTI format <a class="code" href="load__untouch__nii_8m.html#a76db606ebe66b1a54d0e3425521586f4">image</a>.</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;%</div>
<div class="line"><a name="l00004"></a><span class="lineno"><a class="line" href="reslice__nii_8m.html#a8f6ac9ccb9d31196647cf2fab27d167b">    4</a></span>&#160;%  In <a class="code" href="reslice__nii_8m.html#a8f6ac9ccb9d31196647cf2fab27d167b">addition</a>, the <span class="stringliteral">&#39;reslice_nii.m&#39;</span> <a class="code" href="xform__nii_8m.html#a680b8190fb01103a563c5586524b8874">program</a> can also be applied to</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;%  generate an isotropic <a class="code" href="load__untouch__nii_8m.html#a76db606ebe66b1a54d0e3425521586f4">image</a> from either <a class="code" href="reslice__nii_8m.html#a1ede835792071dff91c0e008e7c3b16a">a</a> NIfTI format <a class="code" href="load__untouch__nii_8m.html#a76db606ebe66b1a54d0e3425521586f4">image</a> or</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;%  an ANALYZE format <a class="code" href="load__untouch__nii_8m.html#a76db606ebe66b1a54d0e3425521586f4">image</a>.</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;%</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;%  The resliced NIfTI file will always be in RAS <a class="code" href="load__untouch__nii_8m.html#ad601cae513dcbc91f7b5ccb0101bac22">orientation</a>.</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;%</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;%  This <a class="code" href="xform__nii_8m.html#a680b8190fb01103a563c5586524b8874">program</a> only supports real <a class="code" href="emgm_8m.html#aa536745b29be7cb86f06124adedc5cc8">integer</a> or floating-point data <a class="code" href="xform__nii_8m.html#a6c2f4e523c936b7725a67fb12691ab13">type</a>.</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;%  For other data <a class="code" href="xform__nii_8m.html#a6c2f4e523c936b7725a67fb12691ab13">type</a>, the <a class="code" href="xform__nii_8m.html#a680b8190fb01103a563c5586524b8874">program</a> will exit with an <a class="code" href="reslice__nii_8m.html#adb6806428f592f0efaa32f554c6a6d31">error</a> message </div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;%  &quot;<a class="code" href="animaPyramidalDenseSVFMatchingBridge_8h.html#aa1cc1190aa1b958d686d46e0860bc836">Transform</a> of this NIFTI data is <a class="code" href="xform__nii_8m.html#a2890ce3bb7be1e5fd7e9aa65b58a2925">not</a> supported by the <a class="code" href="xform__nii_8m.html#a680b8190fb01103a563c5586524b8874">program</a>&quot;.</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;%</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;%  <a class="code" href="load__untouch__nii_8m.html#a8b8a3e900ea103e208ebc3030395c227">Usage</a>: reslice_nii(old_fn, new_fn, [voxel_size], [verbose], [bg], ...</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;%           [method], [<a class="code" href="reslice__nii_8m.html#afc28c3a6957baf967f87073a7ccc9d11">img_idx</a>], [<a class="code" href="reslice__nii_8m.html#ab2ffebffc4896f5e6e6d3582ced1fbd9">preferredForm</a>]);</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;%</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;%  old_fn  -    <a class="code" href="save__untouch__slice_8m.html#a74863b270c5b27ac757677777601e8d8">filename</a> <a class="code" href="hellier__hist__normalization__gmm_8m.html#a4797586c9f191ec7ffd84e764c4c54e7">for</a> original NIfTI file</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;%</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;%  new_fn  -    <a class="code" href="save__untouch__slice_8m.html#a74863b270c5b27ac757677777601e8d8">filename</a> <a class="code" href="hellier__hist__normalization__gmm_8m.html#a4797586c9f191ec7ffd84e764c4c54e7">for</a> resliced NIfTI file</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;%</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;%  voxel_size (optional)  - size of <a class="code" href="reslice__nii_8m.html#a1ede835792071dff91c0e008e7c3b16a">a</a> voxel in <a class="code" href="xform__nii_8m.html#a4068c1b4f259ced4d5ad4c6762c715eb">millimeter</a> along x y z</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;%       direction <a class="code" href="hellier__hist__normalization__gmm_8m.html#a4797586c9f191ec7ffd84e764c4c54e7">for</a> resliced NIfTI file. &#39;voxel_size&#39; will use</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;%       the rounded minimum voxel_size in original NIfTI <a class="code" href="reslice__nii_8m.html#a5ca343994f732cea21fa0a27863a0e5a">header</a>,</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;%       <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> it is default or empty.</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;%</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;%  verbose (optional) - 1, 0</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;%           1:  show transforming progress in percentage</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;%           2:  progress will not be displayed</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;%           &#39;verbose&#39; is 1 if it is default or empty.</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;%</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;%  bg (optional)  - background voxel intensity in any extra corner that</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;%           is caused by 3D interpolation. 0 in most cases. &#39;bg&#39;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;%           will be the average of two corner voxel intensities</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;%           in original image volume, if it is default or empty.</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;%</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;%  method (optional)  - 1, 2, or 3</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;%           1:  for Trilinear interpolation</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;%           2:  for Nearest Neighbor interpolation</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;%           3:  for Fischer&#39;s Bresenham interpolation</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;%           &#39;method&#39; is 1 if it is default or empty.</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;%</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;%  img_idx (optional)  -  a numerical array of image volume indices. Only</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;%       the specified volumes will be loaded. All available image</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;%       volumes will be loaded, if it is default or empty.</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;%</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;%   The number of images scans can be obtained from get_nii_frame.m,</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;%   or simply: hdr.dime.dim(5).</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;%</div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="reslice__nii_8m.html#afe106eb99aa948b70ba9ff453d1cde80">   49</a></span>&#160;%  preferredForm (optional)  -  selects which transformation from voxels</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;%   to RAS coordinates; values are <a class="code" href="reslice__nii_8m.html#a1af5497f0d80ec2d3e57945765f73d8c">s</a>,<a class="code" href="reslice__nii_8m.html#a402668afa73f28e7643901afacaeca4c">q</a>,<a class="code" href="reslice__nii_8m.html#afe106eb99aa948b70ba9ff453d1cde80">S</a>,Q.  Lower <span class="keywordflow">case</span> <a class="code" href="reslice__nii_8m.html#a1af5497f0d80ec2d3e57945765f73d8c">s</a>,<a class="code" href="reslice__nii_8m.html#a402668afa73f28e7643901afacaeca4c">q</a> indicate</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;%   <span class="stringliteral">&quot;prefer sform or qform, but use others if preferred not present&quot;</span>. </div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;%   Upper <span class="keywordflow">case</span> indicate the <a class="code" href="xform__nii_8m.html#a680b8190fb01103a563c5586524b8874">program</a> is forced to use the specificied</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;%   tranform or fail loading.  <span class="stringliteral">&#39;preferredForm&#39;</span> will be <span class="charliteral">&#39;s&#39;</span>, <span class="keywordflow">if</span> it is</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;%   <span class="keywordflow">default</span> or empty.   - Jeff Gunter</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;%</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;%  NIFTI data format can be found on: http:<span class="comment">//nifti.nimh.nih.gov</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;%  </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;%  - Jimmy Shen (jimmy@rotman-baycrest.on.ca)</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;%</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;function reslice_nii(old_fn, new_fn, voxel_size, verbose, bg, method, <a class="code" href="reslice__nii_8m.html#afc28c3a6957baf967f87073a7ccc9d11">img_idx</a>, <a class="code" href="reslice__nii_8m.html#ab2ffebffc4896f5e6e6d3582ced1fbd9">preferredForm</a>)</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;   if ~exist(&#39;old_fn&#39;,&#39;var&#39;) | ~exist(&#39;new_fn&#39;,&#39;var&#39;)</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;      error(&#39;<a class="code" href="load__untouch__nii_8m.html#a8b8a3e900ea103e208ebc3030395c227">Usage</a>: reslice_nii(old_fn, new_fn, [voxel_size], [verbose], [bg], [method], [<a class="code" href="reslice__nii_8m.html#afc28c3a6957baf967f87073a7ccc9d11">img_idx</a>])&#39;);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;   <a class="code" href="reslice__nii_8m.html#aa131b1850d62a6cdbbf00f4cfa20411c">end</a></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;   <span class="keywordflow">if</span> <a class="code" href="reslice__nii_8m.html#aac840f9929e8b1944fd5acfd96021220">~exist</a>(<span class="stringliteral">&#39;method&#39;</span>,<span class="stringliteral">&#39;var&#39;</span>) | isempty(method)</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;      method = 1;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;   <a class="code" href="reslice__nii_8m.html#aa131b1850d62a6cdbbf00f4cfa20411c">end</a></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;   <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> ~exist(&#39;<a class="code" href="reslice__nii_8m.html#afc28c3a6957baf967f87073a7ccc9d11">img_idx</a>&#39;,&#39;var&#39;) | isempty(img_idx)</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;      img_idx = [];</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;   <a class="code" href="reslice__nii_8m.html#aa131b1850d62a6cdbbf00f4cfa20411c">end</a></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;   <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> ~exist(&#39;verbose&#39;,&#39;var&#39;) | isempty(verbose)</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;      verbose = 1;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;   <a class="code" href="reslice__nii_8m.html#aa131b1850d62a6cdbbf00f4cfa20411c">end</a></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;   <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> ~exist(&#39;<a class="code" href="reslice__nii_8m.html#ab2ffebffc4896f5e6e6d3582ced1fbd9">preferredForm</a>&#39;,&#39;var&#39;) | isempty(preferredForm)</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;      preferredForm= &#39;<a class="code" href="reslice__nii_8m.html#a1af5497f0d80ec2d3e57945765f73d8c">s</a>&#39;;               % Jeff</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;   <a class="code" href="reslice__nii_8m.html#aa131b1850d62a6cdbbf00f4cfa20411c">end</a></div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="reslice__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">   81</a></span>&#160;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;   <a class="code" href="reslice__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a> = load_nii_no_xform(old_fn, img_idx, 0, preferredForm);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;   <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> ~ismember(<a class="code" href="reslice__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>.<a class="code" href="reslice__nii_8m.html#a33cf9f5c6cd1f55e3c9ab55c25c478be">hdr</a>.dime.<a class="code" href="reslice__nii_8m.html#a541df6bf052f2efc7a949725e1c247f6">datatype</a>, [2,4,8,16,64,256,512,768])</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;      <a class="code" href="reslice__nii_8m.html#adb6806428f592f0efaa32f554c6a6d31">error</a>(&#39;<a class="code" href="animaPyramidalDenseSVFMatchingBridge_8h.html#aa1cc1190aa1b958d686d46e0860bc836">Transform</a> of this NIFTI data is <a class="code" href="xform__nii_8m.html#a2890ce3bb7be1e5fd7e9aa65b58a2925">not</a> supported by the <a class="code" href="xform__nii_8m.html#a680b8190fb01103a563c5586524b8874">program</a>.&#39;);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;   <a class="code" href="reslice__nii_8m.html#aa131b1850d62a6cdbbf00f4cfa20411c">end</a></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;   <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> ~exist(&#39;voxel_size&#39;,&#39;var&#39;) | isempty(voxel_size)</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      voxel_size = round(min(<a class="code" href="reslice__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>.<a class="code" href="reslice__nii_8m.html#a33cf9f5c6cd1f55e3c9ab55c25c478be">hdr</a>.dime.<a class="code" href="reslice__nii_8m.html#ac9eac11d13d4373ffe611a0966658358">pixdim</a>(2:4)))*ones(1,3);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;   <a class="code" href="hellier__hist__normalization__gmm_8m.html#a61c2a47b64784151e1719e8205833341">elseif</a> <a class="code" href="reslice__nii_8m.html#aecc1ebdbb0779184b3d4928dbb2bba91">length</a>(voxel_size) &lt; 3</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      voxel_size = voxel_size(1)*ones(1,3);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;   <a class="code" href="reslice__nii_8m.html#aa131b1850d62a6cdbbf00f4cfa20411c">end</a></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;   <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> ~exist(&#39;bg&#39;,&#39;var&#39;) | isempty(bg)</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      bg = mean([<a class="code" href="reslice__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>.<a class="code" href="reslice__nii_8m.html#a032479f305fb6c68a6d4c7a2cf52165a">img</a>(1) <a class="code" href="reslice__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>.<a class="code" href="reslice__nii_8m.html#a032479f305fb6c68a6d4c7a2cf52165a">img</a>(<a class="code" href="reslice__nii_8m.html#aa131b1850d62a6cdbbf00f4cfa20411c">end</a>)]);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;   end</div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="reslice__nii_8m.html#ad1349df6d6065df3ebe2a83d8353382d">   97</a></span>&#160;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;   <a class="code" href="reslice__nii_8m.html#ad1349df6d6065df3ebe2a83d8353382d">old_M</a> = <a class="code" href="reslice__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>.<a class="code" href="reslice__nii_8m.html#a33cf9f5c6cd1f55e3c9ab55c25c478be">hdr</a>.<a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.<a class="code" href="reslice__nii_8m.html#a7a252e0f4bf7885d8d4789b1b1066aab">old_affine</a>;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;   <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> <a class="code" href="reslice__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>.<a class="code" href="reslice__nii_8m.html#a33cf9f5c6cd1f55e3c9ab55c25c478be">hdr</a>.dime.<a class="code" href="reslice__nii_8m.html#a3bf3ce4ab99aef10bf19775d375feda5">dim</a>(5) &gt; 1</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;      <a class="code" href="hellier__hist__normalization__gmm_8m.html#a4797586c9f191ec7ffd84e764c4c54e7">for</a> <a class="code" href="reslice__nii_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 1:<a class="code" href="reslice__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>.<a class="code" href="reslice__nii_8m.html#a33cf9f5c6cd1f55e3c9ab55c25c478be">hdr</a>.dime.<a class="code" href="reslice__nii_8m.html#a3bf3ce4ab99aef10bf19775d375feda5">dim</a>(5)</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;         <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> verbose</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            <a class="code" href="emgm_8m.html#a5d9facf29f2bc931a29b0059e419d62f">fprintf</a>(&#39;Reslicing %<a class="code" href="reslice__nii_8m.html#a1aabac6d068eef6a7bad3fdf50a05cc8">d</a> of %<a class="code" href="reslice__nii_8m.html#a1aabac6d068eef6a7bad3fdf50a05cc8">d</a> volumes.\n&#39;, <a class="code" href="reslice__nii_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>, <a class="code" href="reslice__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>.<a class="code" href="reslice__nii_8m.html#a33cf9f5c6cd1f55e3c9ab55c25c478be">hdr</a>.dime.<a class="code" href="reslice__nii_8m.html#a3bf3ce4ab99aef10bf19775d375feda5">dim</a>(5));</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;         end</div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="reslice__nii_8m.html#aa131b1850d62a6cdbbf00f4cfa20411c">  105</a></span>&#160;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;         [<a class="code" href="reslice__nii_8m.html#a032479f305fb6c68a6d4c7a2cf52165a">img</a>(:,:,:,i) <a class="code" href="reslice__nii_8m.html#aad05f78187c942f9dd521605fa81f1ba">M</a>] = ...</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        affine(<a class="code" href="reslice__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>.<a class="code" href="reslice__nii_8m.html#a032479f305fb6c68a6d4c7a2cf52165a">img</a>(:,:,:,i), <a class="code" href="reslice__nii_8m.html#ad1349df6d6065df3ebe2a83d8353382d">old_M</a>, voxel_size, verbose, bg, method);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      end</div>
<div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="reslice__nii_8m.html#a5f512d455013d953e6018dee349e78f6">  109</a></span>&#160;   <a class="code" href="reslice__nii_8m.html#a5f512d455013d953e6018dee349e78f6">else</a></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      [img <a class="code" href="reslice__nii_8m.html#aad05f78187c942f9dd521605fa81f1ba">M</a>] = affine(<a class="code" href="reslice__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>.img, old_M, voxel_size, verbose, bg, method);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;   end</div>
<div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="reslice__nii_8m.html#a9182f137f12fd2f6ef44790336d93049">  112</a></span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="reslice__nii_8m.html#a032479f305fb6c68a6d4c7a2cf52165a">  113</a></span>&#160;   <a class="code" href="reslice__nii_8m.html#a9182f137f12fd2f6ef44790336d93049">new_dim</a> = size(img);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;   <a class="code" href="reslice__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>.img = img;</div>
<div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="reslice__nii_8m.html#a541df6bf052f2efc7a949725e1c247f6">  115</a></span>&#160;   <a class="code" href="reslice__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>.<a class="code" href="reslice__nii_8m.html#a33cf9f5c6cd1f55e3c9ab55c25c478be">hdr</a>.dime.dim(2:4) = <a class="code" href="reslice__nii_8m.html#a9182f137f12fd2f6ef44790336d93049">new_dim</a>(1:3);</div>
<div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="reslice__nii_8m.html#ae9a659ee1c9ae19c4f8c8c8c9aa072c0">  116</a></span>&#160;   <a class="code" href="reslice__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>.<a class="code" href="reslice__nii_8m.html#a33cf9f5c6cd1f55e3c9ab55c25c478be">hdr</a>.dime.datatype = 16;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;   <a class="code" href="reslice__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>.<a class="code" href="reslice__nii_8m.html#a33cf9f5c6cd1f55e3c9ab55c25c478be">hdr</a>.dime.<a class="code" href="reslice__nii_8m.html#ae9a659ee1c9ae19c4f8c8c8c9aa072c0">bitpix</a> = 32;</div>
<div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="reslice__nii_8m.html#ad07d284a896de58ddcaa088799d032c7">  118</a></span>&#160;   <a class="code" href="reslice__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>.<a class="code" href="reslice__nii_8m.html#a33cf9f5c6cd1f55e3c9ab55c25c478be">hdr</a>.dime.<a class="code" href="reslice__nii_8m.html#ac9eac11d13d4373ffe611a0966658358">pixdim</a>(2:4) = voxel_size(:)&#39;;</div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="reslice__nii_8m.html#afdf31327ed81468d66cf6bf1ab1a9e2a">  119</a></span>&#160;   <a class="code" href="reslice__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>.<a class="code" href="reslice__nii_8m.html#a33cf9f5c6cd1f55e3c9ab55c25c478be">hdr</a>.dime.<a class="code" href="reslice__nii_8m.html#ad07d284a896de58ddcaa088799d032c7">glmax</a> = max(img(:));</div>
<div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="reslice__nii_8m.html#a319684c14641b1e61c5abf9fa5888b97">  120</a></span>&#160;   <a class="code" href="reslice__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>.<a class="code" href="reslice__nii_8m.html#a33cf9f5c6cd1f55e3c9ab55c25c478be">hdr</a>.dime.<a class="code" href="reslice__nii_8m.html#afdf31327ed81468d66cf6bf1ab1a9e2a">glmin</a> = min(img(:));</div>
<div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="reslice__nii_8m.html#a7faa578ac30a502075bbd6528ca570a8">  121</a></span>&#160;   <a class="code" href="reslice__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>.<a class="code" href="reslice__nii_8m.html#a33cf9f5c6cd1f55e3c9ab55c25c478be">hdr</a>.<a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.<a class="code" href="reslice__nii_8m.html#a319684c14641b1e61c5abf9fa5888b97">qform_code</a> = 0;</div>
<div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="reslice__nii_8m.html#afaec44be68b4dd7d69cd18070f541993">  122</a></span>&#160;   <a class="code" href="reslice__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>.<a class="code" href="reslice__nii_8m.html#a33cf9f5c6cd1f55e3c9ab55c25c478be">hdr</a>.<a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.<a class="code" href="reslice__nii_8m.html#a7faa578ac30a502075bbd6528ca570a8">sform_code</a> = 1;</div>
<div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="reslice__nii_8m.html#a83e89a30b9d250f312ba7c0ee122ead8">  123</a></span>&#160;   <a class="code" href="reslice__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>.<a class="code" href="reslice__nii_8m.html#a33cf9f5c6cd1f55e3c9ab55c25c478be">hdr</a>.<a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.<a class="code" href="reslice__nii_8m.html#afaec44be68b4dd7d69cd18070f541993">srow_x</a> = <a class="code" href="reslice__nii_8m.html#aad05f78187c942f9dd521605fa81f1ba">M</a>(1,:);</div>
<div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="reslice__nii_8m.html#a448a15a66934cebb54a54153e3fe6ba9">  124</a></span>&#160;   <a class="code" href="reslice__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>.<a class="code" href="reslice__nii_8m.html#a33cf9f5c6cd1f55e3c9ab55c25c478be">hdr</a>.<a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.<a class="code" href="reslice__nii_8m.html#a83e89a30b9d250f312ba7c0ee122ead8">srow_y</a> = M(2,:);</div>
<div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="reslice__nii_8m.html#ad23889dc5dd027154839396ddeb4343c">  125</a></span>&#160;   <a class="code" href="reslice__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>.<a class="code" href="reslice__nii_8m.html#a33cf9f5c6cd1f55e3c9ab55c25c478be">hdr</a>.<a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.<a class="code" href="reslice__nii_8m.html#a448a15a66934cebb54a54153e3fe6ba9">srow_z</a> = M(3,:);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;   <a class="code" href="reslice__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>.<a class="code" href="reslice__nii_8m.html#a33cf9f5c6cd1f55e3c9ab55c25c478be">hdr</a>.<a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.<a class="code" href="reslice__nii_8m.html#ad23889dc5dd027154839396ddeb4343c">new_affine</a> = M;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;   <a class="code" href="reslice__nii_8m.html#a0f400f188c4de807df467941f13e33a6">save_nii</a>(<a class="code" href="reslice__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>, new_fn);</div>
<div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="reslice__nii_8m.html#a20e1746bf8fab881987958cd24f9cf6f">  129</a></span>&#160;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;   <a class="code" href="reslice__nii_8m.html#a20e1746bf8fab881987958cd24f9cf6f">return</a>;                  % reslice_nii</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;%--------------------------------------------------------------------</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<a class="code" href="emgm_8m.html#a67531ee5e31b1d1a3065cf637eae4546">function</a> [nii] = load_nii_no_xform(<a class="code" href="save__untouch__slice_8m.html#a74863b270c5b27ac757677777601e8d8">filename</a>, img_idx, <a class="code" href="reslice__nii_8m.html#a03aea36f3a345d73b3b70f70a1efaa89">old_RGB</a>, preferredForm)</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;   <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> ~exist(&#39;filename&#39;,&#39;var&#39;),</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      <a class="code" href="reslice__nii_8m.html#adb6806428f592f0efaa32f554c6a6d31">error</a>(&#39;<a class="code" href="load__untouch__nii_8m.html#a8b8a3e900ea103e208ebc3030395c227">Usage</a>: [nii] = load_nii(filename, [img_idx], [old_RGB])&#39;);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;   end</div>
<div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="reslice__nii_8m.html#afc28c3a6957baf967f87073a7ccc9d11">  139</a></span>&#160;   </div>
<div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="reslice__nii_8m.html#a03aea36f3a345d73b3b70f70a1efaa89">  140</a></span>&#160;   <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> ~exist(&#39;img_idx&#39;,&#39;var&#39;), img_idx = []; end</div>
<div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="reslice__nii_8m.html#ab2ffebffc4896f5e6e6d3582ced1fbd9">  141</a></span>&#160;   <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> ~exist(&#39;old_RGB&#39;,&#39;var&#39;), old_RGB = 0; end</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;   <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> ~exist(&#39;preferredForm&#39;,&#39;var&#39;), preferredForm= &#39;s&#39;; end     % Jeff</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;   </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;   %  Read the <a class="code" href="load__untouch__nii_8m.html#ac238b270f83f7fdcb757309812fa28c5">dataset</a> <a class="code" href="reslice__nii_8m.html#a5ca343994f732cea21fa0a27863a0e5a">header</a></div>
<div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="reslice__nii_8m.html#a5ca343994f732cea21fa0a27863a0e5a">  145</a></span>&#160;   %</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;   [nii.<a class="code" href="reslice__nii_8m.html#a33cf9f5c6cd1f55e3c9ab55c25c478be">hdr</a>,nii.<a class="code" href="reslice__nii_8m.html#a7a6151189c42255ed2727c0c65bd8860">filetype</a>,nii.<a class="code" href="load__nii__ext_8m.html#aff247e90c6608215c92679f8aa390e10">fileprefix</a>,nii.<a class="code" href="load__nii__ext_8m.html#aaf383c3250b5ce4774d65bd6d4bd8809">machine</a>] = load_nii_hdr(filename);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;   %  Read the <a class="code" href="reslice__nii_8m.html#a5ca343994f732cea21fa0a27863a0e5a">header</a> extension</div>
<div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="reslice__nii_8m.html#a7bf40fad0dbd277e418fb8f00ef94fdb">  149</a></span>&#160;   %</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;%   nii.<a class="code" href="load__nii__ext_8m.html#a7bf40fad0dbd277e418fb8f00ef94fdb">ext</a> = load_nii_ext(filename);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;   </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;   %  Read the <a class="code" href="load__untouch__nii_8m.html#ac238b270f83f7fdcb757309812fa28c5">dataset</a> <a class="code" href="reslice__nii_8m.html#a95af6a3ad5dea295d8b6a49fe86cb1bd">body</a></div>
<div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="reslice__nii_8m.html#a95af6a3ad5dea295d8b6a49fe86cb1bd">  153</a></span>&#160;   %</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;   [nii.img,nii.hdr] = ...</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        load_nii_img(nii.hdr,nii.filetype,nii.fileprefix,nii.<a class="code" href="load__nii__ext_8m.html#aaf383c3250b5ce4774d65bd6d4bd8809">machine</a>,img_idx,&#39;&#39;,&#39;&#39;,&#39;&#39;,old_RGB);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;   </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;   %  Perform some of sform/<a class="code" href="reslice__nii_8m.html#a5cb6f57e0e8b329c031b64c318559426">qform</a> <a class="code" href="xform__nii_8m.html#a35e6130bb6ae8c0bbc86ae3e894b4222">transform</a></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;   %</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;%   nii = xform_nii(nii, preferredForm);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div>
<div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="reslice__nii_8m.html#a33cf9f5c6cd1f55e3c9ab55c25c478be">  161</a></span>&#160;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;   hdr = nii.hdr;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;   %  NIFTI can have both sform <a class="code" href="hellier__hist__normalization__gmm_8m.html#a0e59908ff00ce07861ead56d41e8e8b3">and</a> <a class="code" href="reslice__nii_8m.html#a5cb6f57e0e8b329c031b64c318559426">qform</a> <a class="code" href="xform__nii_8m.html#a35e6130bb6ae8c0bbc86ae3e894b4222">transform</a>. This program</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;   %  will check sform_code prior to qform_code by default.</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;   %</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;   %  If user specifys &quot;preferredForm&quot;, user can then choose the</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;   %  priority.                 - Jeff</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;   %</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;   <a class="code" href="reslice__nii_8m.html#a81831abe21f43a3029193d0400d2e286">useForm</a>=[];                  % Jeff</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;   <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> <a class="code" href="reslice__nii_8m.html#aec73fe9e74757fd534ee3e9a7cbc8bde">isequal</a>(preferredForm,&#39;<a class="code" href="reslice__nii_8m.html#afe106eb99aa948b70ba9ff453d1cde80">S</a>&#39;)</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;       <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> <a class="code" href="reslice__nii_8m.html#aec73fe9e74757fd534ee3e9a7cbc8bde">isequal</a>(hdr.<a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.sform_code,0)</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;           <a class="code" href="reslice__nii_8m.html#adb6806428f592f0efaa32f554c6a6d31">error</a>(&#39;User requires sform, sform <a class="code" href="xform__nii_8m.html#a2890ce3bb7be1e5fd7e9aa65b58a2925">not</a> set in <a class="code" href="reslice__nii_8m.html#a5ca343994f732cea21fa0a27863a0e5a">header</a>&#39;);</div>
<div class="line"><a name="l00175"></a><span class="lineno"><a class="line" href="reslice__nii_8m.html#a81831abe21f43a3029193d0400d2e286">  175</a></span>&#160;       <a class="code" href="reslice__nii_8m.html#a5f512d455013d953e6018dee349e78f6">else</a></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;           useForm=&#39;s&#39;;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;       end</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;   end                      % Jeff</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;   <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> <a class="code" href="reslice__nii_8m.html#aec73fe9e74757fd534ee3e9a7cbc8bde">isequal</a>(preferredForm,&#39;Q&#39;)</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;       <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> <a class="code" href="reslice__nii_8m.html#aec73fe9e74757fd534ee3e9a7cbc8bde">isequal</a>(hdr.<a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.qform_code,0)</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;           <a class="code" href="reslice__nii_8m.html#adb6806428f592f0efaa32f554c6a6d31">error</a>(&#39;User requires sform, sform <a class="code" href="xform__nii_8m.html#a2890ce3bb7be1e5fd7e9aa65b58a2925">not</a> set in header&#39;);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;       <a class="code" href="reslice__nii_8m.html#a5f512d455013d953e6018dee349e78f6">else</a></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;           useForm=&#39;<a class="code" href="reslice__nii_8m.html#a402668afa73f28e7643901afacaeca4c">q</a>&#39;;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;       end</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;   end                      % Jeff</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;   <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> <a class="code" href="reslice__nii_8m.html#aec73fe9e74757fd534ee3e9a7cbc8bde">isequal</a>(preferredForm,&#39;s&#39;)</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;       <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> hdr.<a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.sform_code &gt; 0</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;           useForm=&#39;s&#39;;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;       <a class="code" href="hellier__hist__normalization__gmm_8m.html#a61c2a47b64784151e1719e8205833341">elseif</a> hdr.<a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.qform_code &gt; 0</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;           useForm=&#39;q&#39;;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;       end</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;   end                      % Jeff</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;   </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;   <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> <a class="code" href="reslice__nii_8m.html#aec73fe9e74757fd534ee3e9a7cbc8bde">isequal</a>(preferredForm,&#39;q&#39;)</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;       <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> hdr.<a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.qform_code &gt; 0</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;           useForm=&#39;q&#39;;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;       <a class="code" href="hellier__hist__normalization__gmm_8m.html#a61c2a47b64784151e1719e8205833341">elseif</a> hdr.<a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.sform_code &gt; 0</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;           useForm=&#39;s&#39;;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;       end</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;   end                      % Jeff</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;   <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> <a class="code" href="reslice__nii_8m.html#aec73fe9e74757fd534ee3e9a7cbc8bde">isequal</a>(useForm,&#39;s&#39;)</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      <a class="code" href="reslice__nii_8m.html#acac1b43c292a6b669a0e8622c6d1629b">R</a> = [hdr.<a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.<a class="code" href="reslice__nii_8m.html#afaec44be68b4dd7d69cd18070f541993">srow_x</a>(1:3)</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;           hdr.<a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.<a class="code" href="reslice__nii_8m.html#a83e89a30b9d250f312ba7c0ee122ead8">srow_y</a>(1:3)</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;           hdr.<a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.<a class="code" href="reslice__nii_8m.html#a448a15a66934cebb54a54153e3fe6ba9">srow_z</a>(1:3)];</div>
<div class="line"><a name="l00208"></a><span class="lineno"><a class="line" href="reslice__nii_8m.html#adf1f3edb9115acb0a1e04209b7a9937b">  208</a></span>&#160;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      <a class="code" href="reslice__nii_8m.html#adf1f3edb9115acb0a1e04209b7a9937b">T</a> = [hdr.<a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.<a class="code" href="reslice__nii_8m.html#afaec44be68b4dd7d69cd18070f541993">srow_x</a>(4)</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;           hdr.<a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.<a class="code" href="reslice__nii_8m.html#a83e89a30b9d250f312ba7c0ee122ead8">srow_y</a>(4)</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;           hdr.<a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.srow_z(4)];</div>
<div class="line"><a name="l00212"></a><span class="lineno"><a class="line" href="reslice__nii_8m.html#a7a252e0f4bf7885d8d4789b1b1066aab">  212</a></span>&#160;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      nii.hdr.<a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.old_affine = [ [<a class="code" href="reslice__nii_8m.html#acac1b43c292a6b669a0e8622c6d1629b">R</a>;[0 0 0]] [<a class="code" href="reslice__nii_8m.html#adf1f3edb9115acb0a1e04209b7a9937b">T</a>;1] ];</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;   <a class="code" href="hellier__hist__normalization__gmm_8m.html#a61c2a47b64784151e1719e8205833341">elseif</a> <a class="code" href="reslice__nii_8m.html#aec73fe9e74757fd534ee3e9a7cbc8bde">isequal</a>(useForm,&#39;q&#39;)</div>
<div class="line"><a name="l00216"></a><span class="lineno"><a class="line" href="reslice__nii_8m.html#ae0323a9039add2978bf5b49550572c7c">  216</a></span>&#160;      b = hdr.<a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.quatern_b;</div>
<div class="line"><a name="l00217"></a><span class="lineno"><a class="line" href="reslice__nii_8m.html#a1aabac6d068eef6a7bad3fdf50a05cc8">  217</a></span>&#160;      <a class="code" href="reslice__nii_8m.html#ae0323a9039add2978bf5b49550572c7c">c</a> = hdr.<a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.quatern_c;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      <a class="code" href="reslice__nii_8m.html#a1aabac6d068eef6a7bad3fdf50a05cc8">d</a> = hdr.<a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.quatern_d;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> 1.0-(b*b+<a class="code" href="reslice__nii_8m.html#ae0323a9039add2978bf5b49550572c7c">c</a>*<a class="code" href="reslice__nii_8m.html#ae0323a9039add2978bf5b49550572c7c">c</a>+<a class="code" href="reslice__nii_8m.html#a1aabac6d068eef6a7bad3fdf50a05cc8">d</a>*<a class="code" href="reslice__nii_8m.html#a1aabac6d068eef6a7bad3fdf50a05cc8">d</a>) &lt; 0</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;         <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> abs(1.0-(b*b+<a class="code" href="reslice__nii_8m.html#ae0323a9039add2978bf5b49550572c7c">c</a>*<a class="code" href="reslice__nii_8m.html#ae0323a9039add2978bf5b49550572c7c">c</a>+<a class="code" href="reslice__nii_8m.html#a1aabac6d068eef6a7bad3fdf50a05cc8">d</a>*<a class="code" href="reslice__nii_8m.html#a1aabac6d068eef6a7bad3fdf50a05cc8">d</a>)) &lt; 1<a class="code" href="xform__nii_8m.html#a5389c938d8f439f89bc6549e6a18285d">e</a>-5</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            <a class="code" href="reslice__nii_8m.html#a1ede835792071dff91c0e008e7c3b16a">a</a> = 0;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;         <a class="code" href="reslice__nii_8m.html#a5f512d455013d953e6018dee349e78f6">else</a></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            <a class="code" href="reslice__nii_8m.html#adb6806428f592f0efaa32f554c6a6d31">error</a>(&#39;Incorrect quaternion values in this NIFTI data.&#39;);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;         end</div>
<div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="reslice__nii_8m.html#a1ede835792071dff91c0e008e7c3b16a">  226</a></span>&#160;      <a class="code" href="reslice__nii_8m.html#a5f512d455013d953e6018dee349e78f6">else</a></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;         a = sqrt(1.0-(b*b+<a class="code" href="reslice__nii_8m.html#ae0323a9039add2978bf5b49550572c7c">c</a>*<a class="code" href="reslice__nii_8m.html#ae0323a9039add2978bf5b49550572c7c">c</a>+<a class="code" href="reslice__nii_8m.html#a1aabac6d068eef6a7bad3fdf50a05cc8">d</a>*<a class="code" href="reslice__nii_8m.html#a1aabac6d068eef6a7bad3fdf50a05cc8">d</a>));</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      end</div>
<div class="line"><a name="l00229"></a><span class="lineno"><a class="line" href="reslice__nii_8m.html#a969b424c4d5ee8841704d2c431950747">  229</a></span>&#160;</div>
<div class="line"><a name="l00230"></a><span class="lineno"><a class="line" href="reslice__nii_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">  230</a></span>&#160;      <a class="code" href="reslice__nii_8m.html#a969b424c4d5ee8841704d2c431950747">qfac</a> = hdr.dime.<a class="code" href="reslice__nii_8m.html#ac9eac11d13d4373ffe611a0966658358">pixdim</a>(1);</div>
<div class="line"><a name="l00231"></a><span class="lineno"><a class="line" href="reslice__nii_8m.html#abf2bc2545a4a5f5683d9ef3ed0d977e0">  231</a></span>&#160;      i = hdr.dime.pixdim(2);</div>
<div class="line"><a name="l00232"></a><span class="lineno"><a class="line" href="reslice__nii_8m.html#adc468c70fb574ebd07287b38d0d0676d">  232</a></span>&#160;      <a class="code" href="reslice__nii_8m.html#abf2bc2545a4a5f5683d9ef3ed0d977e0">j</a> = hdr.dime.pixdim(3);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      <a class="code" href="reslice__nii_8m.html#adc468c70fb574ebd07287b38d0d0676d">k</a> = <a class="code" href="reslice__nii_8m.html#a969b424c4d5ee8841704d2c431950747">qfac</a> * hdr.dime.pixdim(4);</div>
<div class="line"><a name="l00234"></a><span class="lineno"><a class="line" href="reslice__nii_8m.html#acac1b43c292a6b669a0e8622c6d1629b">  234</a></span>&#160;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      R = [a*a+b*b-<a class="code" href="reslice__nii_8m.html#ae0323a9039add2978bf5b49550572c7c">c</a>*<a class="code" href="reslice__nii_8m.html#ae0323a9039add2978bf5b49550572c7c">c</a>-d*d     2*b*<a class="code" href="reslice__nii_8m.html#ae0323a9039add2978bf5b49550572c7c">c</a>-2*a*d        2*b*d+2*a*<a class="code" href="reslice__nii_8m.html#ae0323a9039add2978bf5b49550572c7c">c</a></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;           2*b*<a class="code" href="reslice__nii_8m.html#ae0323a9039add2978bf5b49550572c7c">c</a>+2*a*d         a*a+<a class="code" href="reslice__nii_8m.html#ae0323a9039add2978bf5b49550572c7c">c</a>*<a class="code" href="reslice__nii_8m.html#ae0323a9039add2978bf5b49550572c7c">c</a>-b*b-d*d    2*<a class="code" href="reslice__nii_8m.html#ae0323a9039add2978bf5b49550572c7c">c</a>*d-2*a*b</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;           2*b*d-2*a*<a class="code" href="reslice__nii_8m.html#ae0323a9039add2978bf5b49550572c7c">c</a>         2*<a class="code" href="reslice__nii_8m.html#ae0323a9039add2978bf5b49550572c7c">c</a>*d+2*a*b        a*a+d*d-<a class="code" href="reslice__nii_8m.html#ae0323a9039add2978bf5b49550572c7c">c</a>*<a class="code" href="reslice__nii_8m.html#ae0323a9039add2978bf5b49550572c7c">c</a>-b*b];</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <a class="code" href="reslice__nii_8m.html#adf1f3edb9115acb0a1e04209b7a9937b">T</a> = [hdr.<a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.qoffset_x</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;           hdr.<a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.qoffset_y</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;           hdr.<a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.qoffset_z];</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      nii.hdr.<a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.old_affine = [ [R * diag([i <a class="code" href="reslice__nii_8m.html#abf2bc2545a4a5f5683d9ef3ed0d977e0">j</a> <a class="code" href="reslice__nii_8m.html#adc468c70fb574ebd07287b38d0d0676d">k</a>]);[0 0 0]] [<a class="code" href="reslice__nii_8m.html#adf1f3edb9115acb0a1e04209b7a9937b">T</a>;1] ];</div>
<div class="line"><a name="l00244"></a><span class="lineno"><a class="line" href="reslice__nii_8m.html#a7a6151189c42255ed2727c0c65bd8860">  244</a></span>&#160;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;   <a class="code" href="hellier__hist__normalization__gmm_8m.html#a61c2a47b64784151e1719e8205833341">elseif</a> nii.filetype == 0 &amp; exist([nii.fileprefix &#39;.mat&#39;],&#39;file&#39;)</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      load([nii.fileprefix &#39;.mat&#39;]);    % old SPM affine matrix</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      R=M(1:3,1:3);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      <a class="code" href="reslice__nii_8m.html#adf1f3edb9115acb0a1e04209b7a9937b">T</a>=M(1:3,4);</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      <a class="code" href="reslice__nii_8m.html#adf1f3edb9115acb0a1e04209b7a9937b">T</a>=R*ones(3,1)+<a class="code" href="reslice__nii_8m.html#adf1f3edb9115acb0a1e04209b7a9937b">T</a>;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      M(1:3,4)=T;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      nii.hdr.<a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.old_affine = M;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div>
<div class="line"><a name="l00253"></a><span class="lineno"><a class="line" href="reslice__nii_8m.html#aad05f78187c942f9dd521605fa81f1ba">  253</a></span>&#160;   <a class="code" href="reslice__nii_8m.html#a5f512d455013d953e6018dee349e78f6">else</a></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      M = diag(hdr.dime.pixdim(2:5));</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      M(1:3,4) = -M(1:3,1:3)*(hdr.<a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.<a class="code" href="xform__nii_8m.html#a5c64f97f406d865a23cef0e15368a61f">originator</a>(1:3)-1)&#39;;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      M(4,4) = 1;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      nii.hdr.<a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.old_affine = M;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;   end</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;   <a class="code" href="reslice__nii_8m.html#a20e1746bf8fab881987958cd24f9cf6f">return</a>                   % load_nii_no_xform</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div>
<div class="ttc" id="reslice__nii_8m_html_a3bf3ce4ab99aef10bf19775d375feda5"><div class="ttname"><a href="reslice__nii_8m.html#a3bf3ce4ab99aef10bf19775d375feda5">dim</a></div><div class="ttdeci">if nii hdr dime dim(5) &gt; 1 for i</div></div>
<div class="ttc" id="hellier__hist__normalization__gmm_8m_html_ab66251c08e0241221a1f306f8c4760f5"><div class="ttname"><a href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a></div><div class="ttdeci">Check the ordering of the means if(mu_i_first_subset&lt; mu_i_second_subset &amp;mu_i_first_subset&lt; mu_i_third_subset) disp('The first Gaussian is the CSF')</div></div>
<div class="ttc" id="reslice__nii_8m_html_abf2bc2545a4a5f5683d9ef3ed0d977e0"><div class="ttname"><a href="reslice__nii_8m.html#abf2bc2545a4a5f5683d9ef3ed0d977e0">j</a></div><div class="ttdeci">j</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00231">reslice_nii.m:231</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_a7a6151189c42255ed2727c0c65bd8860"><div class="ttname"><a href="reslice__nii_8m.html#a7a6151189c42255ed2727c0c65bd8860">filetype</a></div><div class="ttdeci">elseif nii filetype</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00244">reslice_nii.m:244</a></div></div>
<div class="ttc" id="xform__nii_8m_html_a5389c938d8f439f89bc6549e6a18285d"><div class="ttname"><a href="xform__nii_8m.html#a5389c938d8f439f89bc6549e6a18285d">e</a></div><div class="ttdeci">hdr.dime.xyzt_units, 7 e()</div></div>
<div class="ttc" id="xform__nii_8m_html_a2890ce3bb7be1e5fd7e9aa65b58a2925"><div class="ttname"><a href="xform__nii_8m.html#a2890ce3bb7be1e5fd7e9aa65b58a2925">not</a></div><div class="ttdeci">end apply space_unit to pixdim if not(mm)%space_unit</div></div>
<div class="ttc" id="reslice__nii_8m_html_a402668afa73f28e7643901afacaeca4c"><div class="ttname"><a href="reslice__nii_8m.html#a402668afa73f28e7643901afacaeca4c">q</a></div><div class="ttdeci">values are q</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00049">reslice_nii.m:49</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_afaec44be68b4dd7d69cd18070f541993"><div class="ttname"><a href="reslice__nii_8m.html#afaec44be68b4dd7d69cd18070f541993">srow_x</a></div><div class="ttdeci">nii hdr hist srow_x</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00122">reslice_nii.m:122</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_aec73fe9e74757fd534ee3e9a7cbc8bde"><div class="ttname"><a href="reslice__nii_8m.html#aec73fe9e74757fd534ee3e9a7cbc8bde">isequal</a></div><div class="ttdeci">Jeff if isequal(preferredForm,'S') if isequal(hdr.hist.sform_code</div></div>
<div class="ttc" id="reslice__nii_8m_html_a7a252e0f4bf7885d8d4789b1b1066aab"><div class="ttname"><a href="reslice__nii_8m.html#a7a252e0f4bf7885d8d4789b1b1066aab">old_affine</a></div><div class="ttdeci">nii hdr hist old_affine</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00212">reslice_nii.m:212</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_ad23889dc5dd027154839396ddeb4343c"><div class="ttname"><a href="reslice__nii_8m.html#ad23889dc5dd027154839396ddeb4343c">new_affine</a></div><div class="ttdeci">nii hdr hist new_affine</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00125">reslice_nii.m:125</a></div></div>
<div class="ttc" id="emgm_8m_html_a5d9facf29f2bc931a29b0059e419d62f"><div class="ttname"><a href="emgm_8m.html#a5d9facf29f2bc931a29b0059e419d62f">fprintf</a></div><div class="ttdeci">the labels are the labels are probabilities initialization fprintf('EM for Gaussian mixture:running...\n')</div></div>
<div class="ttc" id="xform__nii_8m_html_a4068c1b4f259ced4d5ad4c6762c715eb"><div class="ttname"><a href="xform__nii_8m.html#a4068c1b4f259ced4d5ad4c6762c715eb">millimeter</a></div><div class="ttdeci">set space_unit of xyzt_units to millimeter</div><div class="ttdef"><b>Definition:</b> <a href="xform__nii_8m_source.html#l00461">xform_nii.m:461</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_ad687cafb469fa0ea5f34a64e7eb84ec5"><div class="ttname"><a href="reslice__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a></div><div class="ttdeci">Jeff end nii</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00081">reslice_nii.m:81</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_a5ca343994f732cea21fa0a27863a0e5a"><div class="ttname"><a href="reslice__nii_8m.html#a5ca343994f732cea21fa0a27863a0e5a">header</a></div><div class="ttdeci">end Jeff Read the dataset header[nii.hdr, nii.filetype, nii.fileprefix, nii.machine]</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00145">reslice_nii.m:145</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_a5f512d455013d953e6018dee349e78f6"><div class="ttname"><a href="reslice__nii_8m.html#a5f512d455013d953e6018dee349e78f6">else</a></div><div class="ttdeci">end else[img M]</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00109">reslice_nii.m:109</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_adb6806428f592f0efaa32f554c6a6d31"><div class="ttname"><a href="reslice__nii_8m.html#adb6806428f592f0efaa32f554c6a6d31">error</a></div><div class="ttdeci">'Usage:[nii]=load_nii(filename,[img_idx],[old_RGB] error()</div></div>
<div class="ttc" id="reslice__nii_8m_html_a319684c14641b1e61c5abf9fa5888b97"><div class="ttname"><a href="reslice__nii_8m.html#a319684c14641b1e61c5abf9fa5888b97">qform_code</a></div><div class="ttdeci">nii hdr hist qform_code</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00120">reslice_nii.m:120</a></div></div>
<div class="ttc" id="hellier__hist__normalization__gmm_8m_html_a61c2a47b64784151e1719e8205833341"><div class="ttname"><a href="hellier__hist__normalization__gmm_8m.html#a61c2a47b64784151e1719e8205833341">elseif</a></div><div class="ttdeci">end elseif(mu_i_first_subset &gt; mu_i_second_subset &amp;mu_i_first_subset &gt; mu_i_third_subset) disp('The first Gaussian is the WM')</div></div>
<div class="ttc" id="hellier__hist__normalization__gmm_8m_html_ab731fd3d331f10ec6151c2897aed450a"><div class="ttname"><a href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a></div><div class="ttdeci">hist(cleaned_converted_data, max_value)</div></div>
<div class="ttc" id="reslice__nii_8m_html_aa131b1850d62a6cdbbf00f4cfa20411c"><div class="ttname"><a href="reslice__nii_8m.html#aa131b1850d62a6cdbbf00f4cfa20411c">end</a></div><div class="ttdeci">end[img(:,:,:, i) M]</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00105">reslice_nii.m:105</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_a95af6a3ad5dea295d8b6a49fe86cb1bd"><div class="ttname"><a href="reslice__nii_8m.html#a95af6a3ad5dea295d8b6a49fe86cb1bd">body</a></div><div class="ttdeci">Read the dataset body[nii.img, nii.hdr]</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00153">reslice_nii.m:153</a></div></div>
<div class="ttc" id="xform__nii_8m_html_a6c2f4e523c936b7725a67fb12691ab13"><div class="ttname"><a href="xform__nii_8m.html#a6c2f4e523c936b7725a67fb12691ab13">type</a></div><div class="ttdeci">end the scaling is to be ignored if datatype is DT_RGB24 If datatype is a complex type</div><div class="ttdef"><b>Definition:</b> <a href="xform__nii_8m_source.html#l00109">xform_nii.m:109</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_ad07d284a896de58ddcaa088799d032c7"><div class="ttname"><a href="reslice__nii_8m.html#ad07d284a896de58ddcaa088799d032c7">glmax</a></div><div class="ttdeci">nii hdr dime glmax</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00118">reslice_nii.m:118</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_a83e89a30b9d250f312ba7c0ee122ead8"><div class="ttname"><a href="reslice__nii_8m.html#a83e89a30b9d250f312ba7c0ee122ead8">srow_y</a></div><div class="ttdeci">nii hdr hist srow_y</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00123">reslice_nii.m:123</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_a032479f305fb6c68a6d4c7a2cf52165a"><div class="ttname"><a href="reslice__nii_8m.html#a032479f305fb6c68a6d4c7a2cf52165a">img</a></div><div class="ttdeci">nii img</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00113">reslice_nii.m:113</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_a1aabac6d068eef6a7bad3fdf50a05cc8"><div class="ttname"><a href="reslice__nii_8m.html#a1aabac6d068eef6a7bad3fdf50a05cc8">d</a></div><div class="ttdeci">d</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00217">reslice_nii.m:217</a></div></div>
<div class="ttc" id="xform__nii_8m_html_a5c64f97f406d865a23cef0e15368a61f"><div class="ttname"><a href="xform__nii_8m.html#a5c64f97f406d865a23cef0e15368a61f">originator</a></div><div class="ttdeci">originator</div><div class="ttdef"><b>Definition:</b> <a href="xform__nii_8m_source.html#l00439">xform_nii.m:439</a></div></div>
<div class="ttc" id="animaPyramidalDenseSVFMatchingBridge_8h_html_aa1cc1190aa1b958d686d46e0860bc836"><div class="ttname"><a href="animaPyramidalDenseSVFMatchingBridge_8h.html#aa1cc1190aa1b958d686d46e0860bc836">Transform</a></div><div class="ttdeci">Transform</div><div class="ttdef"><b>Definition:</b> <a href="animaPyramidalDenseSVFMatchingBridge_8h_source.html#l00021">animaPyramidalDenseSVFMatchingBridge.h:21</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_a8f6ac9ccb9d31196647cf2fab27d167b"><div class="ttname"><a href="reslice__nii_8m.html#a8f6ac9ccb9d31196647cf2fab27d167b">addition</a></div><div class="ttdeci">The basic application of the reslice_nii m program is to perform any affine transform defined by a NIfTI format image In addition</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00004">reslice_nii.m:4</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_afc28c3a6957baf967f87073a7ccc9d11"><div class="ttname"><a href="reslice__nii_8m.html#afc28c3a6957baf967f87073a7ccc9d11">img_idx</a></div><div class="ttdeci">end if img_idx</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00139">reslice_nii.m:139</a></div></div>
<div class="ttc" id="load__untouch__nii_8m_html_a76db606ebe66b1a54d0e3425521586f4"><div class="ttname"><a href="load__untouch__nii_8m.html#a76db606ebe66b1a54d0e3425521586f4">image</a></div><div class="ttdeci">Load NIFTI or ANALYZE but not applying any appropriate affine geometric transform or voxel intensity scaling Although according to NIFTI all those header information are supposed to be applied to the loaded NIFTI image</div><div class="ttdef"><b>Definition:</b> <a href="load__untouch__nii_8m_source.html#l00001">load_untouch_nii.m:1</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_aad05f78187c942f9dd521605fa81f1ba"><div class="ttname"><a href="reslice__nii_8m.html#aad05f78187c942f9dd521605fa81f1ba">M</a></div><div class="ttdeci">else M</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00253">reslice_nii.m:253</a></div></div>
<div class="ttc" id="xform__nii_8m_html_a680b8190fb01103a563c5586524b8874"><div class="ttname"><a href="xform__nii_8m.html#a680b8190fb01103a563c5586524b8874">program</a></div><div class="ttdeci">internal function xform_nii m is an internal function called by load_nii so you do not need run this program by yourself It does simplified NIfTI sform qform affine and supports some of the affine including and orthogonal e g any degree shearing etc you will have to use the included reslice_nii m program to reslice the image volume reslice_nii m is not called by any other program</div><div class="ttdef"><b>Definition:</b> <a href="xform__nii_8m_source.html#l00009">xform_nii.m:9</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_ad1349df6d6065df3ebe2a83d8353382d"><div class="ttname"><a href="reslice__nii_8m.html#ad1349df6d6065df3ebe2a83d8353382d">old_M</a></div><div class="ttdeci">end old_M</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00097">reslice_nii.m:97</a></div></div>
<div class="ttc" id="load__untouch__nii_8m_html_a8b8a3e900ea103e208ebc3030395c227"><div class="ttname"><a href="load__untouch__nii_8m.html#a8b8a3e900ea103e208ebc3030395c227">Usage</a></div><div class="ttdeci">Load NIFTI or ANALYZE but not applying any appropriate affine geometric transform or voxel intensity scaling Although according to NIFTI all those header information are supposed to be applied to the loaded NIFTI there are some situations that people do want to leave the original NIFTI header and data untouched They will probably just use MATLAB to do certain image processing regardless of image and to save data back with the same NIfTI header Since this program is only served for those please use it together with save_untouch_nii and do not use save_nii m or view_nii m for the data that is loaded by load_untouch_nii m For normal you should use load_nii m instead Usage</div><div class="ttdef"><b>Definition:</b> <a href="load__untouch__nii_8m_source.html#l00001">load_untouch_nii.m:1</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_a1af5497f0d80ec2d3e57945765f73d8c"><div class="ttname"><a href="reslice__nii_8m.html#a1af5497f0d80ec2d3e57945765f73d8c">s</a></div><div class="ttdeci">values are s</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00049">reslice_nii.m:49</a></div></div>
<div class="ttc" id="emgm_8m_html_aa536745b29be7cb86f06124adedc5cc8"><div class="ttname"><a href="emgm_8m.html#aa536745b29be7cb86f06124adedc5cc8">integer</a></div><div class="ttdeci">the labels are integer</div><div class="ttdef"><b>Definition:</b> <a href="emgm_8m_source.html#l00001">emgm.m:1</a></div></div>
<div class="ttc" id="load__untouch__nii_8m_html_ac238b270f83f7fdcb757309812fa28c5"><div class="ttname"><a href="load__untouch__nii_8m.html#ac238b270f83f7fdcb757309812fa28c5">dataset</a></div><div class="ttdeci">Load NIFTI or ANALYZE dataset</div><div class="ttdef"><b>Definition:</b> <a href="load__untouch__nii_8m_source.html#l00001">load_untouch_nii.m:1</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_a33cf9f5c6cd1f55e3c9ab55c25c478be"><div class="ttname"><a href="reslice__nii_8m.html#a33cf9f5c6cd1f55e3c9ab55c25c478be">hdr</a></div><div class="ttdeci">hdr</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00161">reslice_nii.m:161</a></div></div>
<div class="ttc" id="load__nii__ext_8m_html_a7bf40fad0dbd277e418fb8f00ef94fdb"><div class="ttname"><a href="load__nii__ext_8m.html#a7bf40fad0dbd277e418fb8f00ef94fdb">ext</a></div><div class="ttdeci">load_nii_ext(filename)%%filename-NIFTI file name.%%Returned values:%%ext-Structure of NIFTI header extension, which includes num_ext,%and all the extended header sections in the header extension.%Each extended header section will have its esize, ecode, and%edata, where edata can be plain text, xml, or any raw data%that was saved in the extended header section.%%NIFTI data format can be found on:http:%%-Jimmy Shen(jimmy @rotman-baycrest.on.ca)%function ext=load_nii_ext(fileprefix) if~exist('fileprefix','var'), error('Usage:ext=load_nii_ext(filename)') ext</div><div class="ttdef"><b>Definition:</b> <a href="load__nii__ext_8m_source.html#l00022">load_nii_ext.m:22</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_ae0323a9039add2978bf5b49550572c7c"><div class="ttname"><a href="reslice__nii_8m.html#ae0323a9039add2978bf5b49550572c7c">c</a></div><div class="ttdeci">c</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00216">reslice_nii.m:216</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_a5cb6f57e0e8b329c031b64c318559426"><div class="ttname"><a href="reslice__nii_8m.html#a5cb6f57e0e8b329c031b64c318559426">qform</a></div><div class="ttdeci">values are Q Lower case q indicate prefer sform or qform</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00049">reslice_nii.m:49</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_afdf31327ed81468d66cf6bf1ab1a9e2a"><div class="ttname"><a href="reslice__nii_8m.html#afdf31327ed81468d66cf6bf1ab1a9e2a">glmin</a></div><div class="ttdeci">nii hdr dime glmin</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00119">reslice_nii.m:119</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_acac1b43c292a6b669a0e8622c6d1629b"><div class="ttname"><a href="reslice__nii_8m.html#acac1b43c292a6b669a0e8622c6d1629b">R</a></div><div class="ttdeci">R</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00234">reslice_nii.m:234</a></div></div>
<div class="ttc" id="emgm_8m_html_a67531ee5e31b1d1a3065cf637eae4546"><div class="ttname"><a href="emgm_8m.html#a67531ee5e31b1d1a3065cf637eae4546">function</a></div><div class="ttdeci">function[label, model, llh]</div><div class="ttdef"><b>Definition:</b> <a href="emgm_8m_source.html#l00001">emgm.m:1</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_a7faa578ac30a502075bbd6528ca570a8"><div class="ttname"><a href="reslice__nii_8m.html#a7faa578ac30a502075bbd6528ca570a8">sform_code</a></div><div class="ttdeci">nii hdr hist sform_code</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00121">reslice_nii.m:121</a></div></div>
<div class="ttc" id="hellier__hist__normalization__gmm_8m_html_a0e59908ff00ce07861ead56d41e8e8b3"><div class="ttname"><a href="hellier__hist__normalization__gmm_8m.html#a0e59908ff00ce07861ead56d41e8e8b3">and</a></div><div class="ttdeci">absolute max value DATA DEPENDENT PARAMENTER Not extremely critical but they need to be the data are normalized between and</div><div class="ttdef"><b>Definition:</b> <a href="hellier__hist__normalization__gmm_8m_source.html#l00031">hellier_hist_normalization_gmm.m:31</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_aac840f9929e8b1944fd5acfd96021220"><div class="ttname"><a href="reslice__nii_8m.html#aac840f9929e8b1944fd5acfd96021220">~exist</a></div><div class="ttdeci">end if ~exist('method','var')|isempty(method) method</div></div>
<div class="ttc" id="reslice__nii_8m_html_ac9eac11d13d4373ffe611a0966658358"><div class="ttname"><a href="reslice__nii_8m.html#ac9eac11d13d4373ffe611a0966658358">pixdim</a></div><div class="ttdeci">nii hdr dime pixdim(2:4)</div></div>
<div class="ttc" id="reslice__nii_8m_html_a03aea36f3a345d73b3b70f70a1efaa89"><div class="ttname"><a href="reslice__nii_8m.html#a03aea36f3a345d73b3b70f70a1efaa89">old_RGB</a></div><div class="ttdeci">end if old_RGB</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00140">reslice_nii.m:140</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_a0f400f188c4de807df467941f13e33a6"><div class="ttname"><a href="reslice__nii_8m.html#a0f400f188c4de807df467941f13e33a6">save_nii</a></div><div class="ttdeci">save_nii(nii, new_fn)</div></div>
<div class="ttc" id="reslice__nii_8m_html_a81831abe21f43a3029193d0400d2e286"><div class="ttname"><a href="reslice__nii_8m.html#a81831abe21f43a3029193d0400d2e286">useForm</a></div><div class="ttdeci">else useForm</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00175">reslice_nii.m:175</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_a541df6bf052f2efc7a949725e1c247f6"><div class="ttname"><a href="reslice__nii_8m.html#a541df6bf052f2efc7a949725e1c247f6">datatype</a></div><div class="ttdeci">nii hdr dime datatype</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00115">reslice_nii.m:115</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_a448a15a66934cebb54a54153e3fe6ba9"><div class="ttname"><a href="reslice__nii_8m.html#a448a15a66934cebb54a54153e3fe6ba9">srow_z</a></div><div class="ttdeci">nii hdr hist srow_z</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00124">reslice_nii.m:124</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_a9182f137f12fd2f6ef44790336d93049"><div class="ttname"><a href="reslice__nii_8m.html#a9182f137f12fd2f6ef44790336d93049">new_dim</a></div><div class="ttdeci">end new_dim</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00112">reslice_nii.m:112</a></div></div>
<div class="ttc" id="xform__nii_8m_html_a35e6130bb6ae8c0bbc86ae3e894b4222"><div class="ttname"><a href="xform__nii_8m.html#a35e6130bb6ae8c0bbc86ae3e894b4222">transform</a></div><div class="ttdeci">internal function xform_nii m is an internal function called by load_nii so you do not need run this program by yourself It does simplified NIfTI sform qform affine transform</div><div class="ttdef"><b>Definition:</b> <a href="xform__nii_8m_source.html#l00003">xform_nii.m:3</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_aecc1ebdbb0779184b3d4928dbb2bba91"><div class="ttname"><a href="reslice__nii_8m.html#aecc1ebdbb0779184b3d4928dbb2bba91">length</a></div><div class="ttdeci">elseif length(voxel_size)&lt; 3 voxel_size</div></div>
<div class="ttc" id="reslice__nii_8m_html_afe106eb99aa948b70ba9ff453d1cde80"><div class="ttname"><a href="reslice__nii_8m.html#afe106eb99aa948b70ba9ff453d1cde80">S</a></div><div class="ttdeci">values are S</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00049">reslice_nii.m:49</a></div></div>
<div class="ttc" id="load__nii__ext_8m_html_aff247e90c6608215c92679f8aa390e10"><div class="ttname"><a href="load__nii__ext_8m.html#aff247e90c6608215c92679f8aa390e10">fileprefix</a></div><div class="ttdeci">fileprefix</div><div class="ttdef"><b>Definition:</b> <a href="load__nii__ext_8m_source.html#l00030">load_nii_ext.m:30</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_adc468c70fb574ebd07287b38d0d0676d"><div class="ttname"><a href="reslice__nii_8m.html#adc468c70fb574ebd07287b38d0d0676d">k</a></div><div class="ttdeci">k</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00232">reslice_nii.m:232</a></div></div>
<div class="ttc" id="hellier__hist__normalization__gmm_8m_html_a4797586c9f191ec7ffd84e764c4c54e7"><div class="ttname"><a href="hellier__hist__normalization__gmm_8m.html#a4797586c9f191ec7ffd84e764c4c54e7">for</a></div><div class="ttdeci">for(jj=1:length(first_subset)) if(first_subset(jj)&lt; mu_i_first_subset) standardized_hist(jj)</div></div>
<div class="ttc" id="reslice__nii_8m_html_a969b424c4d5ee8841704d2c431950747"><div class="ttname"><a href="reslice__nii_8m.html#a969b424c4d5ee8841704d2c431950747">qfac</a></div><div class="ttdeci">end qfac</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00229">reslice_nii.m:229</a></div></div>
<div class="ttc" id="save__untouch__slice_8m_html_a74863b270c5b27ac757677777601e8d8"><div class="ttname"><a href="save__untouch__slice_8m.html#a74863b270c5b27ac757677777601e8d8">filename</a></div><div class="ttdeci">Save back to the back to the original image a portion of slices that were loaded by load_untouch_nii You can process those slices matrix in any as long as their dimension is not changed filename</div><div class="ttdef"><b>Definition:</b> <a href="save__untouch__slice_8m_source.html#l00003">save_untouch_slice.m:3</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_a1ede835792071dff91c0e008e7c3b16a"><div class="ttname"><a href="reslice__nii_8m.html#a1ede835792071dff91c0e008e7c3b16a">a</a></div><div class="ttdeci">end else a</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00226">reslice_nii.m:226</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_adf1f3edb9115acb0a1e04209b7a9937b"><div class="ttname"><a href="reslice__nii_8m.html#adf1f3edb9115acb0a1e04209b7a9937b">T</a></div><div class="ttdeci">T</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00208">reslice_nii.m:208</a></div></div>
<div class="ttc" id="load__nii__ext_8m_html_aaf383c3250b5ce4774d65bd6d4bd8809"><div class="ttname"><a href="load__nii__ext_8m.html#aaf383c3250b5ce4774d65bd6d4bd8809">machine</a></div><div class="ttdeci">end machine</div><div class="ttdef"><b>Definition:</b> <a href="load__nii__ext_8m_source.html#l00025">load_nii_ext.m:25</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_a20e1746bf8fab881987958cd24f9cf6f"><div class="ttname"><a href="reslice__nii_8m.html#a20e1746bf8fab881987958cd24f9cf6f">return</a></div><div class="ttdeci">return</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00129">reslice_nii.m:129</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_ab2ffebffc4896f5e6e6d3582ced1fbd9"><div class="ttname"><a href="reslice__nii_8m.html#ab2ffebffc4896f5e6e6d3582ced1fbd9">preferredForm</a></div><div class="ttdeci">end if preferredForm</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00141">reslice_nii.m:141</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_ae9a659ee1c9ae19c4f8c8c8c9aa072c0"><div class="ttname"><a href="reslice__nii_8m.html#ae9a659ee1c9ae19c4f8c8c8c9aa072c0">bitpix</a></div><div class="ttdeci">nii hdr dime bitpix</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00116">reslice_nii.m:116</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_a6f6ccfcf58b31cb6412107d9d5281426"><div class="ttname"><a href="reslice__nii_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00230">reslice_nii.m:230</a></div></div>
<div class="ttc" id="load__untouch__nii_8m_html_ad601cae513dcbc91f7b5ccb0101bac22"><div class="ttname"><a href="load__untouch__nii_8m.html#ad601cae513dcbc91f7b5ccb0101bac22">orientation</a></div><div class="ttdeci">Load NIFTI or ANALYZE but not applying any appropriate affine geometric transform or voxel intensity scaling Although according to NIFTI all those header information are supposed to be applied to the loaded NIFTI there are some situations that people do want to leave the original NIFTI header and data untouched They will probably just use MATLAB to do certain image processing regardless of image orientation</div><div class="ttdef"><b>Definition:</b> <a href="load__untouch__nii_8m_source.html#l00001">load_untouch_nii.m:1</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 11 2014 15:55:49 for ANIMA by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
