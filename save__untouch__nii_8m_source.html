<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>ANIMA: save_untouch_nii.m Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://www.mathjax.org/mathjax/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ANIMA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_5ce0a585544ccf90f6c4541b827e0dfc.html">anima-nightly-src</a></li><li class="navelem"><a class="el" href="dir_0fad36fe10bbcca9e7c6f0593f8115a7.html">filtering</a></li><li class="navelem"><a class="el" href="dir_a8c965e58a3e16f0722aea8ebc1f2ff0.html">nyul_standardization</a></li><li class="navelem"><a class="el" href="dir_369872ed032a3cd8f5543300e1c0f96c.html">matlab_intensity_standardization</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">save_untouch_nii.m</div>  </div>
</div><!--header-->
<div class="contents">
<a href="save__untouch__nii_8m.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;%  Save NIFTI or ANALYZE <a class="code" href="load__untouch__nii_8m.html#ac238b270f83f7fdcb757309812fa28c5">dataset</a> <a class="code" href="xform__nii_8m.html#ab532f211a59e750f5f2657bc5e2172ab">that</a> is loaded by <span class="stringliteral">&quot;load_untouch_nii.m&quot;</span>.</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;%  The output <a class="code" href="load__untouch__nii_8m.html#a76db606ebe66b1a54d0e3425521586f4">image</a> format <a class="code" href="hellier__hist__normalization__gmm_8m.html#a0e59908ff00ce07861ead56d41e8e8b3">and</a> file extension will be the same <a class="code" href="xform__nii_8m.html#a9b871d477ed7a0a4dfe8ab1fc037091b">as</a> the</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;%  input <a class="code" href="save__untouch__nii_8m.html#a0b7f34288633818cf68d423a0bc99f93">one</a> (NIFTI.nii, NIFTI.img or ANALYZE.img). Therefore, any file</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;%  extension <a class="code" href="xform__nii_8m.html#ab532f211a59e750f5f2657bc5e2172ab">that</a> you specified will be ignored.</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;%</div>
<div class="line"><a name="l00006"></a><span class="lineno"><a class="line" href="save__untouch__nii_8m.html#ab2574c0efb758002a427ef55b8a04547">    6</a></span>&#160;%  <a class="code" href="save__untouch__nii_8m.html#ab2574c0efb758002a427ef55b8a04547">Usage</a>: <a class="code" href="hellier__hist__normalization__gmm_8m.html#abb34ee6a8cd6364b503b12de9ea37495">save_untouch_nii</a>(<a class="code" href="load__untouch__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>, <a class="code" href="save__untouch__slice_8m.html#a74863b270c5b27ac757677777601e8d8">filename</a>)</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;%  </div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;%  <a class="code" href="load__untouch__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a> - <a class="code" href="load__untouch__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a> structure <a class="code" href="xform__nii_8m.html#ab532f211a59e750f5f2657bc5e2172ab">that</a> is loaded by &quot;<a class="code" href="hellier__hist__normalization__gmm_8m.html#aee68761b6ed79a43586f5dc87638d130">load_untouch_nii</a>.<a class="code" href="load__untouch__nii_8m.html#a33c2e9f764beb522ead31ce2394a933a">m</a>&quot;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;%</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;%  <a class="code" href="save__untouch__slice_8m.html#a74863b270c5b27ac757677777601e8d8">filename</a>  -  NIFTI or ANALYZE file name.</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;%</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;%  - Jimmy Shen (jimmy@rotman-baycrest.on.ca)</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;%</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<a class="code" href="emgm_8m.html#a67531ee5e31b1d1a3065cf637eae4546">function</a> <a class="code" href="hellier__hist__normalization__gmm_8m.html#abb34ee6a8cd6364b503b12de9ea37495">save_untouch_nii</a>(<a class="code" href="load__untouch__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>, <a class="code" href="save__untouch__slice_8m.html#a74863b270c5b27ac757677777601e8d8">filename</a>)</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;   </div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;   <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> ~exist(&#39;<a class="code" href="load__untouch__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>&#39;,&#39;var&#39;) | isempty(<a class="code" href="load__untouch__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>) | ~<a class="code" href="save__untouch__nii_8m.html#ad90a751c81554d7045309dcaebe0ac1e">isfield</a>(<a class="code" href="load__untouch__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>,&#39;<a class="code" href="save__untouch__nii_8m.html#a9eec45ffd0801f0c1b47cfae527c4c80">hdr</a>&#39;) | ...</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    ~<a class="code" href="save__untouch__nii_8m.html#ad90a751c81554d7045309dcaebe0ac1e">isfield</a>(<a class="code" href="load__untouch__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>,&#39;<a class="code" href="hellier__hist__normalization__gmm_8m.html#adc359efc23ea39d0411c481c3123f64b">img</a>&#39;) | ~exist(&#39;<a class="code" href="save__untouch__slice_8m.html#a74863b270c5b27ac757677777601e8d8">filename</a>&#39;,&#39;var&#39;) | isempty(<a class="code" href="save__untouch__slice_8m.html#a74863b270c5b27ac757677777601e8d8">filename</a>)</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;      <a class="code" href="save__untouch__nii_8m.html#a1efecb095d8dc12aefd7f6aaa76ae4f0">error</a>(&#39;<a class="code" href="save__untouch__nii_8m.html#ab2574c0efb758002a427ef55b8a04547">Usage</a>: save_untouch_nii(<a class="code" href="load__untouch__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>, <a class="code" href="save__untouch__slice_8m.html#a74863b270c5b27ac757677777601e8d8">filename</a>)&#39;);</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;   <a class="code" href="save__untouch__nii_8m.html#a7fda905016fd0faa2a6b5bc6e80d8b2a">end</a></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;   <span class="keywordflow">if</span> <a class="code" href="save__untouch__nii_8m.html#a052feb237e3f4dfc2c2a63b9795e0239">~isfield</a>(<a class="code" href="load__untouch__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>,<span class="stringliteral">&#39;untouch&#39;</span>) | <a class="code" href="load__untouch__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>.untouch == 0</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;      <a class="code" href="save__untouch__nii_8m.html#a1efecb095d8dc12aefd7f6aaa76ae4f0">error</a>(<span class="stringliteral">&#39;Usage: please use &#39;</span><span class="stringliteral">&#39;save_nii.m&#39;</span><span class="stringliteral">&#39; for the modified structure.&#39;</span>);</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;   <a class="code" href="save__untouch__nii_8m.html#a7fda905016fd0faa2a6b5bc6e80d8b2a">end</a></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;   <span class="keywordflow">if</span> <a class="code" href="save__untouch__nii_8m.html#ad90a751c81554d7045309dcaebe0ac1e">isfield</a>(<a class="code" href="load__untouch__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>.hdr.hist,<span class="stringliteral">&#39;magic&#39;</span>) &amp; strcmp(<a class="code" href="load__untouch__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>.hdr.hist.magic(1:3),<span class="stringliteral">&#39;ni1&#39;</span>)</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;      <a class="code" href="save__untouch__nii_8m.html#a75aa7d7c32c2b6b023509abfa8ba7076">filetype</a> = 1;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;   <a class="code" href="hellier__hist__normalization__gmm_8m.html#a61c2a47b64784151e1719e8205833341">elseif</a> <a class="code" href="save__untouch__nii_8m.html#ad90a751c81554d7045309dcaebe0ac1e">isfield</a>(<a class="code" href="load__untouch__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>.hdr.hist,<span class="stringliteral">&#39;magic&#39;</span>) &amp; strcmp(<a class="code" href="load__untouch__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>.hdr.hist.magic(1:3),<span class="stringliteral">&#39;n+1&#39;</span>)</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;      <a class="code" href="save__untouch__nii_8m.html#a75aa7d7c32c2b6b023509abfa8ba7076">filetype</a> = 2;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;   <span class="keywordflow">else</span></div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="save__untouch__nii_8m.html#a75aa7d7c32c2b6b023509abfa8ba7076">   31</a></span>&#160;      <a class="code" href="save__untouch__nii_8m.html#a75aa7d7c32c2b6b023509abfa8ba7076">filetype</a> = 0;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;   <a class="code" href="save__untouch__nii_8m.html#a7fda905016fd0faa2a6b5bc6e80d8b2a">end</a></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div>
<div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="save__untouch__nii_8m.html#a7fda905016fd0faa2a6b5bc6e80d8b2a">   34</a></span>&#160;   [p,f] = fileparts(<a class="code" href="save__untouch__slice_8m.html#a74863b270c5b27ac757677777601e8d8">filename</a>);</div>
<div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="save__untouch__nii_8m.html#aff247e90c6608215c92679f8aa390e10">   35</a></span>&#160;   <a class="code" href="save__untouch__nii_8m.html#aff247e90c6608215c92679f8aa390e10">fileprefix</a> = fullfile(p, f);</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;   <a class="code" href="save__untouch__nii_8m.html#ad3782d41e9e312e7ac625539d9e5d30f">write_nii</a>(<a class="code" href="load__untouch__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>, <a class="code" href="save__untouch__nii_8m.html#a75aa7d7c32c2b6b023509abfa8ba7076">filetype</a>, <a class="code" href="save__untouch__nii_8m.html#aff247e90c6608215c92679f8aa390e10">fileprefix</a>);</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;%   %  So earlier versions of SPM can also open it with correct <a class="code" href="xform__nii_8m.html#a5c64f97f406d865a23cef0e15368a61f">originator</a></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160; %  %</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  % <span class="keywordflow">if</span> <a class="code" href="save__untouch__nii_8m.html#a75aa7d7c32c2b6b023509abfa8ba7076">filetype</a> == 0</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;   %   <a class="code" href="reslice__nii_8m.html#aad05f78187c942f9dd521605fa81f1ba">M</a>=[[diag(nii.hdr.dime.pixdim(2:4)) -[nii.hdr.hist.originator(1:3).*nii.hdr.dime.pixdim(2:4)]&#39;];[0 0 0 1]];</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    %  <a class="code" href="save__untouch__nii_8m.html#a5acb2d0a726641d28d07836ce7824f58">save</a>(<a class="code" href="save__untouch__nii_8m.html#aff247e90c6608215c92679f8aa390e10">fileprefix</a>, <span class="charliteral">&#39;M&#39;</span>);</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;%   <a class="code" href="hellier__hist__normalization__gmm_8m.html#a61c2a47b64784151e1719e8205833341">elseif</a> <a class="code" href="save__untouch__nii_8m.html#a75aa7d7c32c2b6b023509abfa8ba7076">filetype</a> == 1</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160; %     <a class="code" href="reslice__nii_8m.html#aad05f78187c942f9dd521605fa81f1ba">M</a>=[];</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  %    <a class="code" href="save__untouch__nii_8m.html#a5acb2d0a726641d28d07836ce7824f58">save</a>(<a class="code" href="save__untouch__nii_8m.html#aff247e90c6608215c92679f8aa390e10">fileprefix</a>, <span class="charliteral">&#39;M&#39;</span>);</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;   %<a class="code" href="save__untouch__nii_8m.html#a7fda905016fd0faa2a6b5bc6e80d8b2a">end</a></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;   </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;   <span class="keywordflow">return</span>                   % <a class="code" href="hellier__hist__normalization__gmm_8m.html#abb34ee6a8cd6364b503b12de9ea37495">save_untouch_nii</a></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;%-----------------------------------------------------------------------------------</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<a class="code" href="emgm_8m.html#a67531ee5e31b1d1a3065cf637eae4546">function</a> <a class="code" href="save__untouch__nii_8m.html#ad3782d41e9e312e7ac625539d9e5d30f">write_nii</a>(<a class="code" href="load__untouch__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>, filetype, <a class="code" href="save__untouch__nii_8m.html#aff247e90c6608215c92679f8aa390e10">fileprefix</a>)</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;   <a class="code" href="save__untouch__nii_8m.html#a9eec45ffd0801f0c1b47cfae527c4c80">hdr</a> = <a class="code" href="load__untouch__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>.<a class="code" href="save__untouch__nii_8m.html#a9eec45ffd0801f0c1b47cfae527c4c80">hdr</a>;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;   <span class="keywordflow">if</span> <a class="code" href="save__untouch__nii_8m.html#ad90a751c81554d7045309dcaebe0ac1e">isfield</a>(<a class="code" href="load__untouch__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>,<span class="stringliteral">&#39;ext&#39;</span>) &amp; <a class="code" href="load__nii__img_8m.html#a5f147c671f8a9144b430138e5f747451">~isempty</a>(<a class="code" href="load__untouch__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>.ext)</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;      <a class="code" href="load__nii__ext_8m.html#a7bf40fad0dbd277e418fb8f00ef94fdb">ext</a> = <a class="code" href="load__untouch__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>.<a class="code" href="load__nii__ext_8m.html#a7bf40fad0dbd277e418fb8f00ef94fdb">ext</a>;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;      [ext, esize_total] = verify_nii_ext(ext);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;   <a class="code" href="reslice__nii_8m.html#a5f512d455013d953e6018dee349e78f6">else</a></div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="save__untouch__nii_8m.html#ab76e005c0b328590000cf640513f8141">   61</a></span>&#160;      ext = [];</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;   <a class="code" href="save__untouch__nii_8m.html#a7fda905016fd0faa2a6b5bc6e80d8b2a">end</a></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;   switch <span class="keywordtype">double</span>(<a class="code" href="save__untouch__nii_8m.html#a9eec45ffd0801f0c1b47cfae527c4c80">hdr</a>.dime.<a class="code" href="reslice__nii_8m.html#a541df6bf052f2efc7a949725e1c247f6">datatype</a>),</div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="save__untouch__nii_8m.html#a97ee6abe7d21ae63d3399f62a2abd639">   65</a></span>&#160;   <a class="code" href="save__untouch__nii_8m.html#a97ee6abe7d21ae63d3399f62a2abd639">case</a>   1,</div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="save__untouch__nii_8m.html#ab23e7a0f6c1599a6a1db0e536c93284b">   66</a></span>&#160;      <a class="code" href="save__untouch__nii_8m.html#a9eec45ffd0801f0c1b47cfae527c4c80">hdr</a>.dime.<a class="code" href="save__untouch__nii_8m.html#a1ecc77c0c9329d6e8d23387739c9ae28">bitpix</a> = int16(1 ); <a class="code" href="save__untouch__nii_8m.html#ab23e7a0f6c1599a6a1db0e536c93284b">precision</a> = &#39;ubit1&#39;;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;   <a class="code" href="save__untouch__nii_8m.html#a97ee6abe7d21ae63d3399f62a2abd639">case</a>   2,</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;      <a class="code" href="save__untouch__nii_8m.html#a9eec45ffd0801f0c1b47cfae527c4c80">hdr</a>.dime.<a class="code" href="save__untouch__nii_8m.html#a1ecc77c0c9329d6e8d23387739c9ae28">bitpix</a> = int16(8 ); <a class="code" href="save__untouch__nii_8m.html#ab23e7a0f6c1599a6a1db0e536c93284b">precision</a> = &#39;uint8&#39;;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;   <a class="code" href="save__untouch__nii_8m.html#a97ee6abe7d21ae63d3399f62a2abd639">case</a>   4,</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;      <a class="code" href="save__untouch__nii_8m.html#a9eec45ffd0801f0c1b47cfae527c4c80">hdr</a>.dime.<a class="code" href="save__untouch__nii_8m.html#a1ecc77c0c9329d6e8d23387739c9ae28">bitpix</a> = int16(16); <a class="code" href="save__untouch__nii_8m.html#ab23e7a0f6c1599a6a1db0e536c93284b">precision</a> = &#39;int16&#39;;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;   <a class="code" href="save__untouch__nii_8m.html#a97ee6abe7d21ae63d3399f62a2abd639">case</a>   8,</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;      <a class="code" href="save__untouch__nii_8m.html#a9eec45ffd0801f0c1b47cfae527c4c80">hdr</a>.dime.<a class="code" href="save__untouch__nii_8m.html#a1ecc77c0c9329d6e8d23387739c9ae28">bitpix</a> = int16(32); <a class="code" href="save__untouch__nii_8m.html#ab23e7a0f6c1599a6a1db0e536c93284b">precision</a> = &#39;int32&#39;;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;   <a class="code" href="save__untouch__nii_8m.html#a97ee6abe7d21ae63d3399f62a2abd639">case</a>  16,</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;      <a class="code" href="save__untouch__nii_8m.html#a9eec45ffd0801f0c1b47cfae527c4c80">hdr</a>.dime.<a class="code" href="save__untouch__nii_8m.html#a1ecc77c0c9329d6e8d23387739c9ae28">bitpix</a> = int16(32); <a class="code" href="save__untouch__nii_8m.html#ab23e7a0f6c1599a6a1db0e536c93284b">precision</a> = &#39;float32&#39;;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;   <a class="code" href="save__untouch__nii_8m.html#a97ee6abe7d21ae63d3399f62a2abd639">case</a>  32,</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;      <a class="code" href="save__untouch__nii_8m.html#a9eec45ffd0801f0c1b47cfae527c4c80">hdr</a>.dime.<a class="code" href="save__untouch__nii_8m.html#a1ecc77c0c9329d6e8d23387739c9ae28">bitpix</a> = int16(64); <a class="code" href="save__untouch__nii_8m.html#ab23e7a0f6c1599a6a1db0e536c93284b">precision</a> = &#39;float32&#39;;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;   <a class="code" href="save__untouch__nii_8m.html#a97ee6abe7d21ae63d3399f62a2abd639">case</a>  64,</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;      <a class="code" href="save__untouch__nii_8m.html#a9eec45ffd0801f0c1b47cfae527c4c80">hdr</a>.dime.<a class="code" href="save__untouch__nii_8m.html#a1ecc77c0c9329d6e8d23387739c9ae28">bitpix</a> = int16(64); <a class="code" href="save__untouch__nii_8m.html#ab23e7a0f6c1599a6a1db0e536c93284b">precision</a> = &#39;float64&#39;;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;   <a class="code" href="save__untouch__nii_8m.html#a97ee6abe7d21ae63d3399f62a2abd639">case</a> 128,</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;      <a class="code" href="save__untouch__nii_8m.html#a9eec45ffd0801f0c1b47cfae527c4c80">hdr</a>.dime.<a class="code" href="save__untouch__nii_8m.html#a1ecc77c0c9329d6e8d23387739c9ae28">bitpix</a> = int16(24); <a class="code" href="save__untouch__nii_8m.html#ab23e7a0f6c1599a6a1db0e536c93284b">precision</a> = &#39;uint8&#39;;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;   <a class="code" href="save__untouch__nii_8m.html#a97ee6abe7d21ae63d3399f62a2abd639">case</a> 256 </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;      <a class="code" href="save__untouch__nii_8m.html#a9eec45ffd0801f0c1b47cfae527c4c80">hdr</a>.dime.<a class="code" href="save__untouch__nii_8m.html#a1ecc77c0c9329d6e8d23387739c9ae28">bitpix</a> = int16(8 ); <a class="code" href="save__untouch__nii_8m.html#ab23e7a0f6c1599a6a1db0e536c93284b">precision</a> = &#39;int8&#39;;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;   <a class="code" href="save__untouch__nii_8m.html#a97ee6abe7d21ae63d3399f62a2abd639">case</a> 512 </div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;      <a class="code" href="save__untouch__nii_8m.html#a9eec45ffd0801f0c1b47cfae527c4c80">hdr</a>.dime.<a class="code" href="save__untouch__nii_8m.html#a1ecc77c0c9329d6e8d23387739c9ae28">bitpix</a> = int16(16); <a class="code" href="save__untouch__nii_8m.html#ab23e7a0f6c1599a6a1db0e536c93284b">precision</a> = &#39;uint16&#39;;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;   <a class="code" href="save__untouch__nii_8m.html#a97ee6abe7d21ae63d3399f62a2abd639">case</a> 768 </div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;      <a class="code" href="save__untouch__nii_8m.html#a9eec45ffd0801f0c1b47cfae527c4c80">hdr</a>.dime.<a class="code" href="save__untouch__nii_8m.html#a1ecc77c0c9329d6e8d23387739c9ae28">bitpix</a> = int16(32); <a class="code" href="save__untouch__nii_8m.html#ab23e7a0f6c1599a6a1db0e536c93284b">precision</a> = &#39;uint32&#39;;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;   <a class="code" href="save__untouch__nii_8m.html#a97ee6abe7d21ae63d3399f62a2abd639">case</a> 1024</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      <a class="code" href="save__untouch__nii_8m.html#a9eec45ffd0801f0c1b47cfae527c4c80">hdr</a>.dime.<a class="code" href="save__untouch__nii_8m.html#a1ecc77c0c9329d6e8d23387739c9ae28">bitpix</a> = int16(64); <a class="code" href="save__untouch__nii_8m.html#ab23e7a0f6c1599a6a1db0e536c93284b">precision</a> = &#39;int64&#39;;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;   <a class="code" href="save__untouch__nii_8m.html#a97ee6abe7d21ae63d3399f62a2abd639">case</a> 1280</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      <a class="code" href="save__untouch__nii_8m.html#a9eec45ffd0801f0c1b47cfae527c4c80">hdr</a>.dime.<a class="code" href="save__untouch__nii_8m.html#a1ecc77c0c9329d6e8d23387739c9ae28">bitpix</a> = int16(64); <a class="code" href="save__untouch__nii_8m.html#ab23e7a0f6c1599a6a1db0e536c93284b">precision</a> = &#39;uint64&#39;;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;   <a class="code" href="save__untouch__nii_8m.html#a97ee6abe7d21ae63d3399f62a2abd639">case</a> 1792,</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      <a class="code" href="save__untouch__nii_8m.html#a9eec45ffd0801f0c1b47cfae527c4c80">hdr</a>.dime.<a class="code" href="save__untouch__nii_8m.html#a1ecc77c0c9329d6e8d23387739c9ae28">bitpix</a> = int16(128); <a class="code" href="save__untouch__nii_8m.html#ab23e7a0f6c1599a6a1db0e536c93284b">precision</a> = &#39;float64&#39;;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;   otherwise</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;      <a class="code" href="save__untouch__nii_8m.html#a1efecb095d8dc12aefd7f6aaa76ae4f0">error</a>(&#39;This datatype is <a class="code" href="xform__nii_8m.html#a2890ce3bb7be1e5fd7e9aa65b58a2925">not</a> supported&#39;);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;   <a class="code" href="save__untouch__nii_8m.html#a7fda905016fd0faa2a6b5bc6e80d8b2a">end</a></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;   </div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="save__untouch__nii_8m.html#aa59ede954fa6bf97aa2292b7c4d9b610">   97</a></span>&#160;%   <a class="code" href="save__untouch__nii_8m.html#a9eec45ffd0801f0c1b47cfae527c4c80">hdr</a>.dime.<a class="code" href="save__untouch__nii_8m.html#aa59ede954fa6bf97aa2292b7c4d9b610">glmax</a> = round(<span class="keywordtype">double</span>(max(<a class="code" href="load__untouch__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>.<a class="code" href="hellier__hist__normalization__gmm_8m.html#adc359efc23ea39d0411c481c3123f64b">img</a>(:))));</div>
<div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="save__untouch__nii_8m.html#a583ef40e9533d690844b12a22d3995fc">   98</a></span>&#160; %  <a class="code" href="save__untouch__nii_8m.html#a9eec45ffd0801f0c1b47cfae527c4c80">hdr</a>.dime.<a class="code" href="save__untouch__nii_8m.html#a583ef40e9533d690844b12a22d3995fc">glmin</a> = round(<span class="keywordtype">double</span>(min(<a class="code" href="load__untouch__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>.img(:))));</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;   </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;   <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> filetype == 2</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;      <a class="code" href="load__nii__ext_8m.html#ae0165964eaa89921fb87522169ff860c">fid</a> = <a class="code" href="save__untouch__slice_8m.html#a1443276242125c55cd52bf7f28d26ed2">fopen</a>(<a class="code" href="load__untouch0__nii__hdr_8m.html#afe8cde1eb93bd291a31f293e240100cb">sprintf</a>(&#39;%<a class="code" href="load__lbeig_8m.html#a1af5497f0d80ec2d3e57945765f73d8c">s</a>.<a class="code" href="load__untouch__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>&#39;,<a class="code" href="save__untouch__nii_8m.html#aff247e90c6608215c92679f8aa390e10">fileprefix</a>),&#39;w&#39;);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;      </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;      <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> <a class="code" href="load__nii__ext_8m.html#ae0165964eaa89921fb87522169ff860c">fid</a> &lt; 0,</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;         <a class="code" href="save__nii__hdr_8m.html#abe25a0a67ab3a020254ee96cb3a360d5">msg</a> = <a class="code" href="load__untouch0__nii__hdr_8m.html#afe8cde1eb93bd291a31f293e240100cb">sprintf</a>(&#39;Cannot open file %<a class="code" href="load__lbeig_8m.html#a1af5497f0d80ec2d3e57945765f73d8c">s</a>.nii.&#39;,fileprefix);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;         <a class="code" href="save__untouch__nii_8m.html#a1efecb095d8dc12aefd7f6aaa76ae4f0">error</a>(<a class="code" href="save__nii__hdr_8m.html#abe25a0a67ab3a020254ee96cb3a360d5">msg</a>);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;      <a class="code" href="save__untouch__nii_8m.html#a7fda905016fd0faa2a6b5bc6e80d8b2a">end</a></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;      </div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      <a class="code" href="save__untouch__nii_8m.html#a9eec45ffd0801f0c1b47cfae527c4c80">hdr</a>.dime.<a class="code" href="load__nii__ext_8m.html#abfe47cd8900d418db25a9e9fdfd062ef">vox_offset</a> = 352;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> ~isempty(ext)</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;         <a class="code" href="save__untouch__nii_8m.html#a9eec45ffd0801f0c1b47cfae527c4c80">hdr</a>.dime.vox_offset = <a class="code" href="save__untouch__nii_8m.html#a9eec45ffd0801f0c1b47cfae527c4c80">hdr</a>.dime.vox_offset + esize_total;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      <a class="code" href="save__untouch__nii_8m.html#a7fda905016fd0faa2a6b5bc6e80d8b2a">end</a></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      <a class="code" href="save__untouch__nii_8m.html#a9eec45ffd0801f0c1b47cfae527c4c80">hdr</a>.<a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.magic = &#39;n+1&#39;;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      save_untouch_nii_hdr(<a class="code" href="save__untouch__nii_8m.html#a9eec45ffd0801f0c1b47cfae527c4c80">hdr</a>, fid);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;      <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> ~isempty(ext)</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;         save_nii_ext(ext, fid);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;      <a class="code" href="save__untouch__nii_8m.html#a7fda905016fd0faa2a6b5bc6e80d8b2a">end</a></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;   <a class="code" href="hellier__hist__normalization__gmm_8m.html#a61c2a47b64784151e1719e8205833341">elseif</a> filetype == 1</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      fid = <a class="code" href="save__untouch__slice_8m.html#a1443276242125c55cd52bf7f28d26ed2">fopen</a>(<a class="code" href="load__untouch0__nii__hdr_8m.html#afe8cde1eb93bd291a31f293e240100cb">sprintf</a>(&#39;%<a class="code" href="load__lbeig_8m.html#a1af5497f0d80ec2d3e57945765f73d8c">s</a>.hdr&#39;,fileprefix),&#39;w&#39;);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> fid &lt; 0,</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;         msg = <a class="code" href="load__untouch0__nii__hdr_8m.html#afe8cde1eb93bd291a31f293e240100cb">sprintf</a>(&#39;Cannot open file %<a class="code" href="load__lbeig_8m.html#a1af5497f0d80ec2d3e57945765f73d8c">s</a>.hdr.&#39;,fileprefix);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;         <a class="code" href="save__untouch__nii_8m.html#a1efecb095d8dc12aefd7f6aaa76ae4f0">error</a>(msg);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      <a class="code" href="save__untouch__nii_8m.html#a7fda905016fd0faa2a6b5bc6e80d8b2a">end</a></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      hdr.dime.vox_offset = 0;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;      hdr.<a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.magic = &#39;ni1&#39;;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;      save_untouch_nii_hdr(hdr, fid);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> ~isempty(ext)</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;         save_nii_ext(ext, fid);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      <a class="code" href="save__untouch__nii_8m.html#a7fda905016fd0faa2a6b5bc6e80d8b2a">end</a></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      fclose(fid);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      fid = <a class="code" href="save__untouch__slice_8m.html#a1443276242125c55cd52bf7f28d26ed2">fopen</a>(<a class="code" href="load__untouch0__nii__hdr_8m.html#afe8cde1eb93bd291a31f293e240100cb">sprintf</a>(&#39;%<a class="code" href="load__lbeig_8m.html#a1af5497f0d80ec2d3e57945765f73d8c">s</a>.img&#39;,fileprefix),&#39;w&#39;);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;   <a class="code" href="reslice__nii_8m.html#a5f512d455013d953e6018dee349e78f6">else</a></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      fid = <a class="code" href="save__untouch__slice_8m.html#a1443276242125c55cd52bf7f28d26ed2">fopen</a>(<a class="code" href="load__untouch0__nii__hdr_8m.html#afe8cde1eb93bd291a31f293e240100cb">sprintf</a>(&#39;%<a class="code" href="load__lbeig_8m.html#a1af5497f0d80ec2d3e57945765f73d8c">s</a>.hdr&#39;,fileprefix),&#39;w&#39;);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> fid &lt; 0,</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;         msg = <a class="code" href="load__untouch0__nii__hdr_8m.html#afe8cde1eb93bd291a31f293e240100cb">sprintf</a>(&#39;Cannot open file %<a class="code" href="load__lbeig_8m.html#a1af5497f0d80ec2d3e57945765f73d8c">s</a>.hdr.&#39;,fileprefix);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;         <a class="code" href="save__untouch__nii_8m.html#a1efecb095d8dc12aefd7f6aaa76ae4f0">error</a>(msg);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      <a class="code" href="save__untouch__nii_8m.html#a7fda905016fd0faa2a6b5bc6e80d8b2a">end</a></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      save_untouch0_nii_hdr(hdr, fid);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      fclose(fid);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      fid = <a class="code" href="save__untouch__slice_8m.html#a1443276242125c55cd52bf7f28d26ed2">fopen</a>(<a class="code" href="load__untouch0__nii__hdr_8m.html#afe8cde1eb93bd291a31f293e240100cb">sprintf</a>(&#39;%<a class="code" href="load__lbeig_8m.html#a1af5497f0d80ec2d3e57945765f73d8c">s</a>.img&#39;,fileprefix),&#39;w&#39;);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;   <a class="code" href="save__untouch__nii_8m.html#a7fda905016fd0faa2a6b5bc6e80d8b2a">end</a></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;   ScanDim = <span class="keywordtype">double</span>(hdr.dime.<a class="code" href="reslice__nii_8m.html#a3bf3ce4ab99aef10bf19775d375feda5">dim</a>(5));       % <a class="code" href="emgm_8m.html#aaccc9105df5383111407fd5b41255e23">t</a></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;   SliceDim = <span class="keywordtype">double</span>(hdr.dime.dim(4));      % z</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;   RowDim   = <span class="keywordtype">double</span>(hdr.dime.dim(3));      % y</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;   PixelDim = <span class="keywordtype">double</span>(hdr.dime.dim(2));      % x</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;   SliceSz  = <span class="keywordtype">double</span>(hdr.dime.<a class="code" href="xform__nii_8m.html#a9fa650ab4f9794082e0915dfa7306d8f">pixdim</a>(4));</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;   RowSz    = <span class="keywordtype">double</span>(hdr.dime.pixdim(3));</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;   PixelSz  = <span class="keywordtype">double</span>(hdr.dime.pixdim(2));</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;   </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;   x = 1:PixelDim;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;   </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;   <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> filetype == 2 &amp; isempty(ext)</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      skip_bytes = <span class="keywordtype">double</span>(hdr.dime.vox_offset) - 348;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;   <a class="code" href="reslice__nii_8m.html#a5f512d455013d953e6018dee349e78f6">else</a></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      skip_bytes = 0;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;   <a class="code" href="save__untouch__nii_8m.html#a7fda905016fd0faa2a6b5bc6e80d8b2a">end</a></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;   <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> <span class="keywordtype">double</span>(hdr.dime.datatype) == 128</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      %  RGB planes are expected to be in the 4th dimension of nii.img</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      %</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a>(size(nii.img,4)~=3)</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;         <a class="code" href="save__untouch__nii_8m.html#a1efecb095d8dc12aefd7f6aaa76ae4f0">error</a>([&#39;The NII structure does <a class="code" href="xform__nii_8m.html#a2890ce3bb7be1e5fd7e9aa65b58a2925">not</a> appear to have 3 RGB color planes in the 4th dimension&#39;]);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      <a class="code" href="save__untouch__nii_8m.html#a7fda905016fd0faa2a6b5bc6e80d8b2a">end</a></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      nii.img = permute(nii.img, [4 1 2 3 5 6 7 8]);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;   <a class="code" href="save__untouch__nii_8m.html#a7fda905016fd0faa2a6b5bc6e80d8b2a">end</a></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;   %  For complex float32 or complex float64, voxel values</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;   %  include [real, imag]</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;   %</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;   <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> hdr.dime.datatype == 32 | hdr.dime.datatype == 1792</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      real_img = real(nii.img(:))&#39;;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      nii.img = imag(nii.img(:))&#39;;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      nii.img = [real_img; nii.img];</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;   <a class="code" href="save__untouch__nii_8m.html#a7fda905016fd0faa2a6b5bc6e80d8b2a">end</a></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;   <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> skip_bytes</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      <a class="code" href="save__nii__ext_8m.html#a571eb1ac5bae0c0ddbeebf4156d7539f">fwrite</a>(fid, zeros(1,skip_bytes), &#39;uint8&#39;);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;   <a class="code" href="save__untouch__nii_8m.html#a7fda905016fd0faa2a6b5bc6e80d8b2a">end</a></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;   <a class="code" href="save__nii__ext_8m.html#a571eb1ac5bae0c0ddbeebf4156d7539f">fwrite</a>(fid, nii.img, <a class="code" href="save__untouch__nii_8m.html#ab23e7a0f6c1599a6a1db0e536c93284b">precision</a>);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;%   <a class="code" href="save__nii__ext_8m.html#a571eb1ac5bae0c0ddbeebf4156d7539f">fwrite</a>(fid, nii.img, precision, skip_bytes);        % <a class="code" href="save__untouch__nii_8m.html#a1efecb095d8dc12aefd7f6aaa76ae4f0">error</a> using skip</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;   fclose(fid);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;   <a class="code" href="reslice__nii_8m.html#a20e1746bf8fab881987958cd24f9cf6f">return</a>;                  % <a class="code" href="save__untouch__nii_8m.html#ad3782d41e9e312e7ac625539d9e5d30f">write_nii</a></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div>
<div class="ttc" id="reslice__nii_8m_html_a3bf3ce4ab99aef10bf19775d375feda5"><div class="ttname"><a href="reslice__nii_8m.html#a3bf3ce4ab99aef10bf19775d375feda5">dim</a></div><div class="ttdeci">if nii hdr dime dim(5) &gt; 1 for i</div></div>
<div class="ttc" id="hellier__hist__normalization__gmm_8m_html_ab66251c08e0241221a1f306f8c4760f5"><div class="ttname"><a href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a></div><div class="ttdeci">Check the ordering of the means if(mu_i_first_subset&lt; mu_i_second_subset &amp;mu_i_first_subset&lt; mu_i_third_subset) disp('The first Gaussian is the CSF')</div></div>
<div class="ttc" id="load__untouch__nii_8m_html_a33c2e9f764beb522ead31ce2394a933a"><div class="ttname"><a href="load__untouch__nii_8m.html#a33c2e9f764beb522ead31ce2394a933a">m</a></div><div class="ttdeci">Load NIFTI or ANALYZE but not applying any appropriate affine geometric transform or voxel intensity scaling Although according to NIFTI all those header information are supposed to be applied to the loaded NIFTI there are some situations that people do want to leave the original NIFTI header and data untouched They will probably just use MATLAB to do certain image processing regardless of image and to save data back with the same NIfTI header Since this program is only served for those please use it together with save_untouch_nii m</div><div class="ttdef"><b>Definition:</b> <a href="load__untouch__nii_8m_source.html#l00001">load_untouch_nii.m:1</a></div></div>
<div class="ttc" id="xform__nii_8m_html_a9fa650ab4f9794082e0915dfa7306d8f"><div class="ttname"><a href="xform__nii_8m.html#a9fa650ab4f9794082e0915dfa7306d8f">pixdim</a></div><div class="ttdeci">end hdr dime pixdim</div><div class="ttdef"><b>Definition:</b> <a href="xform__nii_8m_source.html#l00469">xform_nii.m:469</a></div></div>
<div class="ttc" id="load__lbeig_8m_html_a1af5497f0d80ec2d3e57945765f73d8c"><div class="ttname"><a href="load__lbeig_8m.html#a1af5497f0d80ec2d3e57945765f73d8c">s</a></div><div class="ttdeci">s</div><div class="ttdef"><b>Definition:</b> <a href="load__lbeig_8m_source.html#l00005">load_lbeig.m:5</a></div></div>
<div class="ttc" id="save__untouch__nii_8m_html_aff247e90c6608215c92679f8aa390e10"><div class="ttname"><a href="save__untouch__nii_8m.html#aff247e90c6608215c92679f8aa390e10">fileprefix</a></div><div class="ttdeci">fileprefix</div><div class="ttdef"><b>Definition:</b> <a href="save__untouch__nii_8m_source.html#l00035">save_untouch_nii.m:35</a></div></div>
<div class="ttc" id="xform__nii_8m_html_a9b871d477ed7a0a4dfe8ab1fc037091b"><div class="ttname"><a href="xform__nii_8m.html#a9b871d477ed7a0a4dfe8ab1fc037091b">as</a></div><div class="ttdeci">Jeff end if scl_slope field is then each voxel value in the dataset should be scaled as</div><div class="ttdef"><b>Definition:</b> <a href="xform__nii_8m_source.html#l00078">xform_nii.m:78</a></div></div>
<div class="ttc" id="save__untouch__nii_8m_html_a0b7f34288633818cf68d423a0bc99f93"><div class="ttname"><a href="save__untouch__nii_8m.html#a0b7f34288633818cf68d423a0bc99f93">one</a></div><div class="ttdeci">Save NIFTI or ANALYZE dataset that is loaded by load_untouch_nii m The output image format and file extension will be the same as the input one(NIFTI.nii, NIFTI.img or ANALYZE.img).Therefore</div></div>
<div class="ttc" id="save__untouch__nii_8m_html_aa59ede954fa6bf97aa2292b7c4d9b610"><div class="ttname"><a href="save__untouch__nii_8m.html#aa59ede954fa6bf97aa2292b7c4d9b610">glmax</a></div><div class="ttdeci">end hdr dime glmax</div><div class="ttdef"><b>Definition:</b> <a href="save__untouch__nii_8m_source.html#l00097">save_untouch_nii.m:97</a></div></div>
<div class="ttc" id="xform__nii_8m_html_a2890ce3bb7be1e5fd7e9aa65b58a2925"><div class="ttname"><a href="xform__nii_8m.html#a2890ce3bb7be1e5fd7e9aa65b58a2925">not</a></div><div class="ttdeci">end apply space_unit to pixdim if not(mm)%space_unit</div></div>
<div class="ttc" id="reslice__nii_8m_html_a5f512d455013d953e6018dee349e78f6"><div class="ttname"><a href="reslice__nii_8m.html#a5f512d455013d953e6018dee349e78f6">else</a></div><div class="ttdeci">end else[img M]</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00109">reslice_nii.m:109</a></div></div>
<div class="ttc" id="hellier__hist__normalization__gmm_8m_html_a61c2a47b64784151e1719e8205833341"><div class="ttname"><a href="hellier__hist__normalization__gmm_8m.html#a61c2a47b64784151e1719e8205833341">elseif</a></div><div class="ttdeci">end elseif(mu_i_first_subset &gt; mu_i_second_subset &amp;mu_i_first_subset &gt; mu_i_third_subset) disp('The first Gaussian is the WM')</div></div>
<div class="ttc" id="hellier__hist__normalization__gmm_8m_html_ab731fd3d331f10ec6151c2897aed450a"><div class="ttname"><a href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a></div><div class="ttdeci">hist(cleaned_converted_data, max_value)</div></div>
<div class="ttc" id="save__untouch__nii_8m_html_a052feb237e3f4dfc2c2a63b9795e0239"><div class="ttname"><a href="save__untouch__nii_8m.html#a052feb237e3f4dfc2c2a63b9795e0239">~isfield</a></div><div class="ttdeci">end if ~isfield(nii,'untouch')|nii.untouch</div></div>
<div class="ttc" id="save__untouch__nii_8m_html_a75aa7d7c32c2b6b023509abfa8ba7076"><div class="ttname"><a href="save__untouch__nii_8m.html#a75aa7d7c32c2b6b023509abfa8ba7076">filetype</a></div><div class="ttdeci">end if isfield(nii.hdr.hist,'magic')&amp;strcmp(nii.hdr.hist.magic(1 elseif isfield(nii.hdr.hist,'magic')&amp;strcmp(nii.hdr.hist.magic(1 else filetype</div><div class="ttdef"><b>Definition:</b> <a href="save__untouch__nii_8m_source.html#l00031">save_untouch_nii.m:31</a></div></div>
<div class="ttc" id="save__untouch__slice_8m_html_a1443276242125c55cd52bf7f28d26ed2"><div class="ttname"><a href="save__untouch__slice_8m.html#a1443276242125c55cd52bf7f28d26ed2">fopen</a></div><div class="ttdeci">fn,'r+', machine fopen()</div></div>
<div class="ttc" id="xform__nii_8m_html_a5c64f97f406d865a23cef0e15368a61f"><div class="ttname"><a href="xform__nii_8m.html#a5c64f97f406d865a23cef0e15368a61f">originator</a></div><div class="ttdeci">originator</div><div class="ttdef"><b>Definition:</b> <a href="xform__nii_8m_source.html#l00439">xform_nii.m:439</a></div></div>
<div class="ttc" id="save__untouch__nii_8m_html_a7fda905016fd0faa2a6b5bc6e80d8b2a"><div class="ttname"><a href="save__untouch__nii_8m.html#a7fda905016fd0faa2a6b5bc6e80d8b2a">end</a></div><div class="ttdeci">end[p, f]</div><div class="ttdef"><b>Definition:</b> <a href="save__untouch__nii_8m_source.html#l00034">save_untouch_nii.m:34</a></div></div>
<div class="ttc" id="save__untouch__nii_8m_html_a9eec45ffd0801f0c1b47cfae527c4c80"><div class="ttname"><a href="save__untouch__nii_8m.html#a9eec45ffd0801f0c1b47cfae527c4c80">hdr</a></div><div class="ttdeci">nii, filetype, fileprefix hdr()</div></div>
<div class="ttc" id="save__untouch__nii_8m_html_a97ee6abe7d21ae63d3399f62a2abd639"><div class="ttname"><a href="save__untouch__nii_8m.html#a97ee6abe7d21ae63d3399f62a2abd639">case</a></div><div class="ttdeci">end switch case</div><div class="ttdef"><b>Definition:</b> <a href="save__untouch__nii_8m_source.html#l00065">save_untouch_nii.m:65</a></div></div>
<div class="ttc" id="load__untouch__nii_8m_html_a76db606ebe66b1a54d0e3425521586f4"><div class="ttname"><a href="load__untouch__nii_8m.html#a76db606ebe66b1a54d0e3425521586f4">image</a></div><div class="ttdeci">Load NIFTI or ANALYZE but not applying any appropriate affine geometric transform or voxel intensity scaling Although according to NIFTI all those header information are supposed to be applied to the loaded NIFTI image</div><div class="ttdef"><b>Definition:</b> <a href="load__untouch__nii_8m_source.html#l00001">load_untouch_nii.m:1</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_aad05f78187c942f9dd521605fa81f1ba"><div class="ttname"><a href="reslice__nii_8m.html#aad05f78187c942f9dd521605fa81f1ba">M</a></div><div class="ttdeci">else M</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00253">reslice_nii.m:253</a></div></div>
<div class="ttc" id="load__nii__ext_8m_html_abfe47cd8900d418db25a9e9fdfd062ef"><div class="ttname"><a href="load__nii__ext_8m.html#abfe47cd8900d418db25a9e9fdfd062ef">vox_offset</a></div><div class="ttdeci">vox_offset</div><div class="ttdef"><b>Definition:</b> <a href="load__nii__ext_8m_source.html#l00058">load_nii_ext.m:58</a></div></div>
<div class="ttc" id="save__untouch__nii_8m_html_a5acb2d0a726641d28d07836ce7824f58"><div class="ttname"><a href="save__untouch__nii_8m.html#a5acb2d0a726641d28d07836ce7824f58">save</a></div><div class="ttdeci">save(fileprefix, 'M')</div></div>
<div class="ttc" id="load__untouch__nii_8m_html_ac238b270f83f7fdcb757309812fa28c5"><div class="ttname"><a href="load__untouch__nii_8m.html#ac238b270f83f7fdcb757309812fa28c5">dataset</a></div><div class="ttdeci">Load NIFTI or ANALYZE dataset</div><div class="ttdef"><b>Definition:</b> <a href="load__untouch__nii_8m_source.html#l00001">load_untouch_nii.m:1</a></div></div>
<div class="ttc" id="save__untouch__nii_8m_html_a1ecc77c0c9329d6e8d23387739c9ae28"><div class="ttname"><a href="save__untouch__nii_8m.html#a1ecc77c0c9329d6e8d23387739c9ae28">bitpix</a></div><div class="ttdeci">end switch hdr dime bitpix</div><div class="ttdef"><b>Definition:</b> <a href="save__untouch__nii_8m_source.html#l00066">save_untouch_nii.m:66</a></div></div>
<div class="ttc" id="hellier__hist__normalization__gmm_8m_html_abb34ee6a8cd6364b503b12de9ea37495"><div class="ttname"><a href="hellier__hist__normalization__gmm_8m.html#abb34ee6a8cd6364b503b12de9ea37495">save_untouch_nii</a></div><div class="ttdeci">save_untouch_nii(template,[file_name_template(1:end-4) '_scaled.nii'])</div></div>
<div class="ttc" id="save__nii__hdr_8m_html_abe25a0a67ab3a020254ee96cb3a360d5"><div class="ttname"><a href="save__nii__hdr_8m.html#abe25a0a67ab3a020254ee96cb3a360d5">msg</a></div><div class="ttdeci">if msg</div><div class="ttdef"><b>Definition:</b> <a href="save__nii__hdr_8m_source.html#l00056">save_nii_hdr.m:56</a></div></div>
<div class="ttc" id="save__untouch__nii_8m_html_ad90a751c81554d7045309dcaebe0ac1e"><div class="ttname"><a href="save__untouch__nii_8m.html#ad90a751c81554d7045309dcaebe0ac1e">isfield</a></div><div class="ttdeci">if isfield(nii,'ext')&amp;~isempty(nii.ext) ext</div></div>
<div class="ttc" id="load__nii__ext_8m_html_a7bf40fad0dbd277e418fb8f00ef94fdb"><div class="ttname"><a href="load__nii__ext_8m.html#a7bf40fad0dbd277e418fb8f00ef94fdb">ext</a></div><div class="ttdeci">load_nii_ext(filename)%%filename-NIFTI file name.%%Returned values:%%ext-Structure of NIFTI header extension, which includes num_ext,%and all the extended header sections in the header extension.%Each extended header section will have its esize, ecode, and%edata, where edata can be plain text, xml, or any raw data%that was saved in the extended header section.%%NIFTI data format can be found on:http:%%-Jimmy Shen(jimmy @rotman-baycrest.on.ca)%function ext=load_nii_ext(fileprefix) if~exist('fileprefix','var'), error('Usage:ext=load_nii_ext(filename)') ext</div><div class="ttdef"><b>Definition:</b> <a href="load__nii__ext_8m_source.html#l00022">load_nii_ext.m:22</a></div></div>
<div class="ttc" id="emgm_8m_html_a67531ee5e31b1d1a3065cf637eae4546"><div class="ttname"><a href="emgm_8m.html#a67531ee5e31b1d1a3065cf637eae4546">function</a></div><div class="ttdeci">function[label, model, llh]</div><div class="ttdef"><b>Definition:</b> <a href="emgm_8m_source.html#l00001">emgm.m:1</a></div></div>
<div class="ttc" id="hellier__hist__normalization__gmm_8m_html_a0e59908ff00ce07861ead56d41e8e8b3"><div class="ttname"><a href="hellier__hist__normalization__gmm_8m.html#a0e59908ff00ce07861ead56d41e8e8b3">and</a></div><div class="ttdeci">absolute max value DATA DEPENDENT PARAMENTER Not extremely critical but they need to be the data are normalized between and</div><div class="ttdef"><b>Definition:</b> <a href="hellier__hist__normalization__gmm_8m_source.html#l00031">hellier_hist_normalization_gmm.m:31</a></div></div>
<div class="ttc" id="load__nii__ext_8m_html_ae0165964eaa89921fb87522169ff860c"><div class="ttname"><a href="load__nii__ext_8m.html#ae0165964eaa89921fb87522169ff860c">fid</a></div><div class="ttdeci">end end fid</div><div class="ttdef"><b>Definition:</b> <a href="load__nii__ext_8m_source.html#l00057">load_nii_ext.m:57</a></div></div>
<div class="ttc" id="load__nii__img_8m_html_a5f147c671f8a9144b430138e5f747451"><div class="ttname"><a href="load__nii__img_8m.html#a5f147c671f8a9144b430138e5f747451">~isempty</a></div><div class="ttdeci">end check img_idx if ~isempty(img_idx)&amp;~isnumeric(img_idx) error('&quot;img_idx&quot;should be a numerical array.')</div></div>
<div class="ttc" id="reslice__nii_8m_html_a541df6bf052f2efc7a949725e1c247f6"><div class="ttname"><a href="reslice__nii_8m.html#a541df6bf052f2efc7a949725e1c247f6">datatype</a></div><div class="ttdeci">nii hdr dime datatype</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00115">reslice_nii.m:115</a></div></div>
<div class="ttc" id="xform__nii_8m_html_ab532f211a59e750f5f2657bc5e2172ab"><div class="ttname"><a href="xform__nii_8m.html#ab532f211a59e750f5f2657bc5e2172ab">that</a></div><div class="ttdeci">after we figure out the angles and squash them to closest rectilinear direction After that</div><div class="ttdef"><b>Definition:</b> <a href="xform__nii_8m_source.html#l00389">xform_nii.m:389</a></div></div>
<div class="ttc" id="emgm_8m_html_aaccc9105df5383111407fd5b41255e23"><div class="ttname"><a href="emgm_8m.html#aaccc9105df5383111407fd5b41255e23">t</a></div><div class="ttdeci">t</div><div class="ttdef"><b>Definition:</b> <a href="emgm_8m_source.html#l00018">emgm.m:18</a></div></div>
<div class="ttc" id="save__untouch__nii_8m_html_ab2574c0efb758002a427ef55b8a04547"><div class="ttname"><a href="save__untouch__nii_8m.html#ab2574c0efb758002a427ef55b8a04547">Usage</a></div><div class="ttdeci">Save NIFTI or ANALYZE dataset that is loaded by load_untouch_nii m The output image format and file extension will be the same as the input any file extension that you specified will be ignored Usage</div><div class="ttdef"><b>Definition:</b> <a href="save__untouch__nii_8m_source.html#l00006">save_untouch_nii.m:6</a></div></div>
<div class="ttc" id="save__untouch__nii_8m_html_ad3782d41e9e312e7ac625539d9e5d30f"><div class="ttname"><a href="save__untouch__nii_8m.html#ad3782d41e9e312e7ac625539d9e5d30f">write_nii</a></div><div class="ttdeci">write_nii(nii, filetype, fileprefix)</div></div>
<div class="ttc" id="hellier__hist__normalization__gmm_8m_html_adc359efc23ea39d0411c481c3123f64b"><div class="ttname"><a href="hellier__hist__normalization__gmm_8m.html#adc359efc23ea39d0411c481c3123f64b">img</a></div><div class="ttdeci">template img</div><div class="ttdef"><b>Definition:</b> <a href="hellier__hist__normalization__gmm_8m_source.html#l00042">hellier_hist_normalization_gmm.m:42</a></div></div>
<div class="ttc" id="save__nii__ext_8m_html_a571eb1ac5bae0c0ddbeebf4156d7539f"><div class="ttname"><a href="save__nii__ext_8m.html#a571eb1ac5bae0c0ddbeebf4156d7539f">fwrite</a></div><div class="ttdeci">fid, ext.extension, 'uchar' fwrite()</div></div>
<div class="ttc" id="load__untouch__nii_8m_html_ad687cafb469fa0ea5f34a64e7eb84ec5"><div class="ttname"><a href="load__untouch__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a></div><div class="ttdeci">Perform some of sform qform transform nii</div><div class="ttdef"><b>Definition:</b> <a href="load__untouch__nii_8m_source.html#l00123">load_untouch_nii.m:123</a></div></div>
<div class="ttc" id="load__untouch0__nii__hdr_8m_html_afe8cde1eb93bd291a31f293e240100cb"><div class="ttname"><a href="load__untouch0__nii__hdr_8m.html#afe8cde1eb93bd291a31f293e240100cb">sprintf</a></div><div class="ttdeci">'%s.hdr', fileprefix sprintf()</div></div>
<div class="ttc" id="save__untouch__nii_8m_html_a583ef40e9533d690844b12a22d3995fc"><div class="ttname"><a href="save__untouch__nii_8m.html#a583ef40e9533d690844b12a22d3995fc">glmin</a></div><div class="ttdeci">hdr dime glmin</div><div class="ttdef"><b>Definition:</b> <a href="save__untouch__nii_8m_source.html#l00098">save_untouch_nii.m:98</a></div></div>
<div class="ttc" id="save__untouch__slice_8m_html_a74863b270c5b27ac757677777601e8d8"><div class="ttname"><a href="save__untouch__slice_8m.html#a74863b270c5b27ac757677777601e8d8">filename</a></div><div class="ttdeci">Save back to the back to the original image a portion of slices that were loaded by load_untouch_nii You can process those slices matrix in any as long as their dimension is not changed filename</div><div class="ttdef"><b>Definition:</b> <a href="save__untouch__slice_8m_source.html#l00003">save_untouch_slice.m:3</a></div></div>
<div class="ttc" id="hellier__hist__normalization__gmm_8m_html_aee68761b6ed79a43586f5dc87638d130"><div class="ttname"><a href="hellier__hist__normalization__gmm_8m.html#aee68761b6ed79a43586f5dc87638d130">load_untouch_nii</a></div><div class="ttdeci">file_mask_template load_untouch_nii()</div></div>
<div class="ttc" id="save__untouch__nii_8m_html_a1efecb095d8dc12aefd7f6aaa76ae4f0"><div class="ttname"><a href="save__untouch__nii_8m.html#a1efecb095d8dc12aefd7f6aaa76ae4f0">error</a></div><div class="ttdeci">'Usage:save_untouch_nii(nii, filename error()</div></div>
<div class="ttc" id="reslice__nii_8m_html_a20e1746bf8fab881987958cd24f9cf6f"><div class="ttname"><a href="reslice__nii_8m.html#a20e1746bf8fab881987958cd24f9cf6f">return</a></div><div class="ttdeci">return</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00129">reslice_nii.m:129</a></div></div>
<div class="ttc" id="save__untouch__nii_8m_html_ab23e7a0f6c1599a6a1db0e536c93284b"><div class="ttname"><a href="save__untouch__nii_8m.html#ab23e7a0f6c1599a6a1db0e536c93284b">precision</a></div><div class="ttdeci">precision</div><div class="ttdef"><b>Definition:</b> <a href="save__untouch__nii_8m_source.html#l00066">save_untouch_nii.m:66</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 11 2014 15:55:49 for ANIMA by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
