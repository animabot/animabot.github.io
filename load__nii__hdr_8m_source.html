<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>ANIMA: load_nii_hdr.m Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://www.mathjax.org/mathjax/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ANIMA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_5ce0a585544ccf90f6c4541b827e0dfc.html">anima-nightly-src</a></li><li class="navelem"><a class="el" href="dir_0fad36fe10bbcca9e7c6f0593f8115a7.html">filtering</a></li><li class="navelem"><a class="el" href="dir_a8c965e58a3e16f0722aea8ebc1f2ff0.html">nyul_standardization</a></li><li class="navelem"><a class="el" href="dir_369872ed032a3cd8f5543300e1c0f96c.html">matlab_intensity_standardization</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">load_nii_hdr.m</div>  </div>
</div><!--header-->
<div class="contents">
<a href="load__nii__hdr_8m.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;%  <span class="keyword">internal</span> <span class="keyword">function</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;%  - Jimmy Shen (jimmy@rotman-baycrest.on.ca)</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<a class="code" href="emgm_8m.html#a67531ee5e31b1d1a3065cf637eae4546">function</a> [<a class="code" href="load__untouch__nii_8m.html#a74f9730f486be70373c812d488936dc9">hdr</a>, <a class="code" href="load__untouch__nii_8m.html#a7a6151189c42255ed2727c0c65bd8860">filetype</a>, <a class="code" href="load__nii__hdr_8m.html#aff247e90c6608215c92679f8aa390e10">fileprefix</a>, <a class="code" href="load__nii__hdr_8m.html#aaf383c3250b5ce4774d65bd6d4bd8809">machine</a>] = load_nii_hdr(<a class="code" href="load__nii__hdr_8m.html#aff247e90c6608215c92679f8aa390e10">fileprefix</a>)</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;   <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> ~exist(&#39;<a class="code" href="load__nii__hdr_8m.html#aff247e90c6608215c92679f8aa390e10">fileprefix</a>&#39;,&#39;var&#39;),</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;      <a class="code" href="load__nii__hdr_8m.html#a42464a15ef9d72963e0b452599c249c5">error</a>(&#39;<a class="code" href="load__untouch__nii_8m.html#a8b8a3e900ea103e208ebc3030395c227">Usage</a>: [hdr, filetype, fileprefix, machine] = load_nii_hdr(<a class="code" href="save__untouch__slice_8m.html#a74863b270c5b27ac757677777601e8d8">filename</a>)&#39;);</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;   <a class="code" href="load__nii__img_8m.html#a0e58fe5bf1f468ebd8ae6b3620a52472">end</a></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div>
<div class="line"><a name="l00011"></a><span class="lineno"><a class="line" href="load__nii__hdr_8m.html#aaf383c3250b5ce4774d65bd6d4bd8809">   11</a></span>&#160;   <a class="code" href="load__nii__hdr_8m.html#aaf383c3250b5ce4774d65bd6d4bd8809">machine</a> = <span class="stringliteral">&#39;ieee-le&#39;</span>;</div>
<div class="line"><a name="l00012"></a><span class="lineno"><a class="line" href="load__nii__hdr_8m.html#a66140e6beb38dc2e74f8cb093a013e09">   12</a></span>&#160;   <a class="code" href="load__nii__hdr_8m.html#a66140e6beb38dc2e74f8cb093a013e09">new_ext</a> = 0;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;   <span class="keywordflow">if</span> <a class="code" href="load__nii__hdr_8m.html#a4c109e7c229fc3ea83555deee5c709d4">findstr</a>(<span class="stringliteral">&#39;.nii&#39;</span>,<a class="code" href="load__nii__hdr_8m.html#aff247e90c6608215c92679f8aa390e10">fileprefix</a>)</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;      <a class="code" href="load__nii__hdr_8m.html#a66140e6beb38dc2e74f8cb093a013e09">new_ext</a> = 1;</div>
<div class="line"><a name="l00016"></a><span class="lineno"><a class="line" href="load__nii__hdr_8m.html#aff247e90c6608215c92679f8aa390e10">   16</a></span>&#160;      <a class="code" href="load__nii__hdr_8m.html#aff247e90c6608215c92679f8aa390e10">fileprefix</a> = strrep(<a class="code" href="load__nii__hdr_8m.html#aff247e90c6608215c92679f8aa390e10">fileprefix</a>,&#39;.<a class="code" href="load__untouch__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a>&#39;,&#39;&#39;);</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;   <a class="code" href="load__nii__img_8m.html#a0e58fe5bf1f468ebd8ae6b3620a52472">end</a></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;   <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> <a class="code" href="load__nii__hdr_8m.html#a4c109e7c229fc3ea83555deee5c709d4">findstr</a>(&#39;.<a class="code" href="load__untouch__nii_8m.html#a74f9730f486be70373c812d488936dc9">hdr</a>&#39;,fileprefix)</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;      fileprefix = strrep(fileprefix,&#39;.hdr&#39;,&#39;&#39;);</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;   <a class="code" href="load__nii__img_8m.html#a0e58fe5bf1f468ebd8ae6b3620a52472">end</a></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;   <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> <a class="code" href="load__nii__hdr_8m.html#a4c109e7c229fc3ea83555deee5c709d4">findstr</a>(&#39;.<a class="code" href="hellier__hist__normalization__gmm_8m.html#adc359efc23ea39d0411c481c3123f64b">img</a>&#39;,fileprefix)</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;      fileprefix = strrep(fileprefix,&#39;.img&#39;,&#39;&#39;);</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;   <a class="code" href="load__nii__img_8m.html#a0e58fe5bf1f468ebd8ae6b3620a52472">end</a></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;   <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> new_ext</div>
<div class="line"><a name="l00028"></a><span class="lineno"><a class="line" href="load__nii__hdr_8m.html#a6dd2769f1241ed9a4f806f5378b68038">   28</a></span>&#160;      <a class="code" href="load__nii__hdr_8m.html#a6dd2769f1241ed9a4f806f5378b68038">fn</a> = <a class="code" href="load__untouch0__nii__hdr_8m.html#afe8cde1eb93bd291a31f293e240100cb">sprintf</a>(&#39;%<a class="code" href="load__lbeig_8m.html#a1af5497f0d80ec2d3e57945765f73d8c">s</a>.nii&#39;,fileprefix);</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;      <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> ~exist(<a class="code" href="load__nii__hdr_8m.html#a6dd2769f1241ed9a4f806f5378b68038">fn</a>)</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;         <a class="code" href="save__nii__hdr_8m.html#abe25a0a67ab3a020254ee96cb3a360d5">msg</a> = <a class="code" href="load__untouch0__nii__hdr_8m.html#afe8cde1eb93bd291a31f293e240100cb">sprintf</a>(&#39;Cannot find file &quot;%<a class="code" href="load__lbeig_8m.html#a1af5497f0d80ec2d3e57945765f73d8c">s</a>.nii&quot;.&#39;, fileprefix);</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;         <a class="code" href="load__nii__hdr_8m.html#a42464a15ef9d72963e0b452599c249c5">error</a>(<a class="code" href="save__nii__hdr_8m.html#abe25a0a67ab3a020254ee96cb3a360d5">msg</a>);</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;      <a class="code" href="load__nii__img_8m.html#a0e58fe5bf1f468ebd8ae6b3620a52472">end</a></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;   <a class="code" href="reslice__nii_8m.html#a5f512d455013d953e6018dee349e78f6">else</a></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;      <a class="code" href="load__nii__hdr_8m.html#a6dd2769f1241ed9a4f806f5378b68038">fn</a> = <a class="code" href="load__untouch0__nii__hdr_8m.html#afe8cde1eb93bd291a31f293e240100cb">sprintf</a>(&#39;%<a class="code" href="load__lbeig_8m.html#a1af5497f0d80ec2d3e57945765f73d8c">s</a>.hdr&#39;,fileprefix);</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;      <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> ~exist(<a class="code" href="load__nii__hdr_8m.html#a6dd2769f1241ed9a4f806f5378b68038">fn</a>)</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;         msg = <a class="code" href="load__untouch0__nii__hdr_8m.html#afe8cde1eb93bd291a31f293e240100cb">sprintf</a>(&#39;Cannot find file &quot;%<a class="code" href="load__lbeig_8m.html#a1af5497f0d80ec2d3e57945765f73d8c">s</a>.hdr&quot;.&#39;, fileprefix);</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;         <a class="code" href="load__nii__hdr_8m.html#a42464a15ef9d72963e0b452599c249c5">error</a>(msg);</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;      <a class="code" href="load__nii__img_8m.html#a0e58fe5bf1f468ebd8ae6b3620a52472">end</a></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;   <a class="code" href="load__nii__img_8m.html#a0e58fe5bf1f468ebd8ae6b3620a52472">end</a></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="load__nii__hdr_8m.html#ae0165964eaa89921fb87522169ff860c">   43</a></span>&#160;   <a class="code" href="load__nii__hdr_8m.html#ae0165964eaa89921fb87522169ff860c">fid</a> = <a class="code" href="save__untouch__slice_8m.html#a1443276242125c55cd52bf7f28d26ed2">fopen</a>(<a class="code" href="load__nii__hdr_8m.html#a6dd2769f1241ed9a4f806f5378b68038">fn</a>,&#39;r&#39;,<a class="code" href="load__nii__hdr_8m.html#aaf383c3250b5ce4774d65bd6d4bd8809">machine</a>);</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    </div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;   <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> <a class="code" href="load__nii__hdr_8m.html#ae0165964eaa89921fb87522169ff860c">fid</a> &lt; 0,</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;      msg = <a class="code" href="load__untouch0__nii__hdr_8m.html#afe8cde1eb93bd291a31f293e240100cb">sprintf</a>(&#39;Cannot open file %<a class="code" href="load__lbeig_8m.html#a1af5497f0d80ec2d3e57945765f73d8c">s</a>.&#39;,fn);</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;      <a class="code" href="load__nii__hdr_8m.html#a42464a15ef9d72963e0b452599c249c5">error</a>(msg);</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;   <a class="code" href="reslice__nii_8m.html#a5f512d455013d953e6018dee349e78f6">else</a></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;      <a class="code" href="save__nii__hdr_8m.html#ab048745b66ac1019388ee1c99db4e9d7">fseek</a>(fid,0,&#39;bof&#39;);</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;      <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> fread(fid,1,&#39;int32&#39;) == 348</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;         hdr = read_header(fid);</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;         fclose(fid);</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;      <a class="code" href="reslice__nii_8m.html#a5f512d455013d953e6018dee349e78f6">else</a></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;         fclose(fid);</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;         %  first try reading the opposite endian to &#39;machine&#39;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;         %</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;         switch machine,</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;         <a class="code" href="save__untouch__nii_8m.html#a97ee6abe7d21ae63d3399f62a2abd639">case</a> &#39;ieee-le&#39;, machine = &#39;ieee-be&#39;;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;         <a class="code" href="save__untouch__nii_8m.html#a97ee6abe7d21ae63d3399f62a2abd639">case</a> &#39;ieee-be&#39;, machine = &#39;ieee-le&#39;;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;         <a class="code" href="load__nii__img_8m.html#a0e58fe5bf1f468ebd8ae6b3620a52472">end</a></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;         fid = <a class="code" href="save__untouch__slice_8m.html#a1443276242125c55cd52bf7f28d26ed2">fopen</a>(fn,&#39;r&#39;,machine);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;         <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> fid &lt; 0,</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;            msg = <a class="code" href="load__untouch0__nii__hdr_8m.html#afe8cde1eb93bd291a31f293e240100cb">sprintf</a>(&#39;Cannot open file %s.&#39;,fn);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;            <a class="code" href="load__nii__hdr_8m.html#a42464a15ef9d72963e0b452599c249c5">error</a>(msg);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;         <a class="code" href="reslice__nii_8m.html#a5f512d455013d953e6018dee349e78f6">else</a></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;            <a class="code" href="save__nii__hdr_8m.html#ab048745b66ac1019388ee1c99db4e9d7">fseek</a>(fid,0,&#39;bof&#39;);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;            <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> fread(fid,1,&#39;int32&#39;) ~= 348</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;               %  Now throw an <a class="code" href="load__nii__hdr_8m.html#a42464a15ef9d72963e0b452599c249c5">error</a></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;               %</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;               msg = <a class="code" href="load__untouch0__nii__hdr_8m.html#afe8cde1eb93bd291a31f293e240100cb">sprintf</a>(&#39;File &quot;%s&quot; is corrupted.&#39;,fn);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;               <a class="code" href="load__nii__hdr_8m.html#a42464a15ef9d72963e0b452599c249c5">error</a>(msg);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;            <a class="code" href="load__nii__img_8m.html#a0e58fe5bf1f468ebd8ae6b3620a52472">end</a></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;            hdr = read_header(fid);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;            fclose(fid);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;         <a class="code" href="load__nii__img_8m.html#a0e58fe5bf1f468ebd8ae6b3620a52472">end</a></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;      <a class="code" href="load__nii__img_8m.html#a0e58fe5bf1f468ebd8ae6b3620a52472">end</a></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;   <a class="code" href="load__nii__img_8m.html#a0e58fe5bf1f468ebd8ae6b3620a52472">end</a></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;   <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a> strcmp(hdr.<a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.magic, &#39;n+1&#39;)</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      <a class="code" href="load__untouch__nii_8m.html#a7a6151189c42255ed2727c0c65bd8860">filetype</a> = 2;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;   <a class="code" href="hellier__hist__normalization__gmm_8m.html#a61c2a47b64784151e1719e8205833341">elseif</a> strcmp(hdr.<a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.magic, &#39;ni1&#39;)</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      filetype = 1;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;   <a class="code" href="reslice__nii_8m.html#a5f512d455013d953e6018dee349e78f6">else</a></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      filetype = 0;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;   <a class="code" href="load__nii__img_8m.html#a0e58fe5bf1f468ebd8ae6b3620a52472">end</a></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;   <a class="code" href="reslice__nii_8m.html#a20e1746bf8fab881987958cd24f9cf6f">return</a>                   % load_nii_hdr</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;%---------------------------------------------------------------------</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<a class="code" href="emgm_8m.html#a67531ee5e31b1d1a3065cf637eae4546">function</a> [ <a class="code" href="save__nii__hdr_8m.html#abeca945d0a8dd386ad1188ecb9a82910">dsr</a> ] = read_header(fid)</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        %  Original <a class="code" href="load__untouch__nii_8m.html#a5381cdd79f39b45eb8550689cc700aac">header</a> structures</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    %  struct <a class="code" href="save__nii__hdr_8m.html#abeca945d0a8dd386ad1188ecb9a82910">dsr</a></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    %       { </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    %       <span class="keyword">struct </span><a class="code" href="save__nii__hdr_8m.html#a9c96a3b4c3f05721e8b427885ecbea85">header_key</a> hk;            <span class="comment">/*   0 +  40       */</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    %       <span class="keyword">struct </span><a class="code" href="save__nii__hdr_8m.html#aac788ed813970f94c7b01b266d384f90">image_dimension</a> dime;     <span class="comment">/*  40 + 108       */</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    %       <span class="keyword">struct </span><a class="code" href="save__nii__hdr_8m.html#a70c170fbd64912553b6e420234dd01ee">data_history</a> hist;        <span class="comment">/* 148 + 200       */</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    %       };                               <span class="comment">/* total= 348 bytes*/</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <a class="code" href="save__nii__hdr_8m.html#abeca945d0a8dd386ad1188ecb9a82910">dsr</a>.hk   = <a class="code" href="save__nii__hdr_8m.html#a9c96a3b4c3f05721e8b427885ecbea85">header_key</a>(<a class="code" href="load__nii__hdr_8m.html#ae0165964eaa89921fb87522169ff860c">fid</a>);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <a class="code" href="save__nii__hdr_8m.html#abeca945d0a8dd386ad1188ecb9a82910">dsr</a>.dime = <a class="code" href="save__nii__hdr_8m.html#aac788ed813970f94c7b01b266d384f90">image_dimension</a>(<a class="code" href="load__nii__hdr_8m.html#ae0165964eaa89921fb87522169ff860c">fid</a>);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="save__nii__hdr_8m.html#abeca945d0a8dd386ad1188ecb9a82910">dsr</a>.hist = <a class="code" href="save__nii__hdr_8m.html#a70c170fbd64912553b6e420234dd01ee">data_history</a>(<a class="code" href="load__nii__hdr_8m.html#ae0165964eaa89921fb87522169ff860c">fid</a>);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    %  For Analyze data format</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    %</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordflow">if</span> ~strcmp(<a class="code" href="save__nii__hdr_8m.html#abeca945d0a8dd386ad1188ecb9a82910">dsr</a>.hist.magic, <span class="stringliteral">&#39;n+1&#39;</span>) &amp; ~strcmp(<a class="code" href="save__nii__hdr_8m.html#abeca945d0a8dd386ad1188ecb9a82910">dsr</a>.hist.magic, <span class="stringliteral">&#39;ni1&#39;</span>)</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <a class="code" href="save__nii__hdr_8m.html#abeca945d0a8dd386ad1188ecb9a82910">dsr</a>.<a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.<a class="code" href="reslice__nii_8m.html#a319684c14641b1e61c5abf9fa5888b97">qform_code</a> = 0;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <a class="code" href="save__nii__hdr_8m.html#abeca945d0a8dd386ad1188ecb9a82910">dsr</a>.<a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.<a class="code" href="reslice__nii_8m.html#a7faa578ac30a502075bbd6528ca570a8">sform_code</a> = 0;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <a class="code" href="load__nii__img_8m.html#a0e58fe5bf1f468ebd8ae6b3620a52472">end</a></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <a class="code" href="reslice__nii_8m.html#a20e1746bf8fab881987958cd24f9cf6f">return</a>                  % read_header</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;%---------------------------------------------------------------------</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<a class="code" href="emgm_8m.html#a67531ee5e31b1d1a3065cf637eae4546">function</a> [ hk ] = <a class="code" href="save__nii__hdr_8m.html#a9c96a3b4c3f05721e8b427885ecbea85">header_key</a>(<a class="code" href="load__nii__hdr_8m.html#ae0165964eaa89921fb87522169ff860c">fid</a>)</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <a class="code" href="save__nii__hdr_8m.html#ab048745b66ac1019388ee1c99db4e9d7">fseek</a>(<a class="code" href="load__nii__hdr_8m.html#ae0165964eaa89921fb87522169ff860c">fid</a>,0,&#39;bof&#39;);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    </div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    %  Original <a class="code" href="load__untouch__nii_8m.html#a5381cdd79f39b45eb8550689cc700aac">header</a> structures   </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    %  struct <a class="code" href="save__nii__hdr_8m.html#a9c96a3b4c3f05721e8b427885ecbea85">header_key</a>                     <span class="comment">/* header key      */</span> </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    %       {                                <span class="comment">/* off + size      */</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    %       <span class="keywordtype">int</span> sizeof_hdr                   <span class="comment">/*  0 +  4         */</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    %       <span class="keywordtype">char</span> data_type[10];              <span class="comment">/*  4 + 10         */</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    %       <span class="keywordtype">char</span> db_name[18];                <span class="comment">/* 14 + 18         */</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    %       <span class="keywordtype">int</span> extents;                     <span class="comment">/* 32 +  4         */</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    %       <span class="keywordtype">short</span> <span class="keywordtype">int</span> session_error;         <span class="comment">/* 36 +  2         */</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    %       <span class="keywordtype">char</span> regular;                    <span class="comment">/* 38 +  1         */</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    %       <span class="keywordtype">char</span> dim_info;   % <span class="keywordtype">char</span> hkey_un0;        <span class="comment">/* 39 +  1 */</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    %       };                               <span class="comment">/* total=40 bytes  */</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    %</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    % <span class="keywordtype">int</span> sizeof_header   Should be 348.</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    % <span class="keywordtype">char</span> regular        Must be <span class="charliteral">&#39;r&#39;</span> to indicate <a class="code" href="xform__nii_8m.html#ab532f211a59e750f5f2657bc5e2172ab">that</a> all images <a class="code" href="hellier__hist__normalization__gmm_8m.html#a0e59908ff00ce07861ead56d41e8e8b3">and</a> </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    %                     volumes are the same size. </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    v6 = version;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordflow">if</span> str2num(v6(1))&lt;6</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;       directchar = <span class="stringliteral">&#39;*char&#39;</span>;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;       directchar = <span class="stringliteral">&#39;uchar=&gt;char&#39;</span>;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <a class="code" href="load__nii__img_8m.html#a0e58fe5bf1f468ebd8ae6b3620a52472">end</a></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    hk.sizeof_hdr    = fread(<a class="code" href="load__nii__hdr_8m.html#ae0165964eaa89921fb87522169ff860c">fid</a>, 1,<span class="stringliteral">&#39;int32&#39;</span>)<span class="stringliteral">&#39;;  % should be 348!</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="stringliteral">    hk.data_type     = deblank(fread(fid,10,directchar)&#39;</span>);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    hk.db_name       = deblank(fread(<a class="code" href="load__nii__hdr_8m.html#ae0165964eaa89921fb87522169ff860c">fid</a>,18,directchar)<span class="stringliteral">&#39;);</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="stringliteral">    hk.extents       = fread(fid, 1,&#39;</span>int32<span class="charliteral">&#39;)&#39;</span>;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    hk.session_error = fread(<a class="code" href="load__nii__hdr_8m.html#ae0165964eaa89921fb87522169ff860c">fid</a>, 1,<span class="stringliteral">&#39;int16&#39;</span>)<span class="stringliteral">&#39;;</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="stringliteral">    hk.regular       = fread(fid, 1,directchar)&#39;</span>;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    hk.dim_info      = fread(<a class="code" href="load__nii__hdr_8m.html#ae0165964eaa89921fb87522169ff860c">fid</a>, 1,<span class="stringliteral">&#39;uchar&#39;</span>)<span class="stringliteral">&#39;;</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="stringliteral">    </span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="stringliteral">    return                  % header_key</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="stringliteral">%---------------------------------------------------------------------</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="stringliteral">function [ dime ] = image_dimension(fid)</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="stringliteral">    %  Original header structures    </span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="stringliteral">    %  struct image_dimension</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="stringliteral">    %       {                                /* off + size      */</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="stringliteral">    %       short int dim[8];                /* 0 + 16          */</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="stringliteral">        %       /*</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="stringliteral">        %           dim[0]      Number of dimensions in database; usually 4. </span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="stringliteral">        %           dim[1]      Image X dimension;  number of *pixels* in an image row. </span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="stringliteral">        %           dim[2]      Image Y dimension;  number of *pixel rows* in slice. </span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="stringliteral">        %           dim[3]      Volume Z dimension; number of *slices* in a volume. </span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="stringliteral">        %           dim[4]      Time points; number of volumes in database</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="stringliteral">        %       */</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="stringliteral">    %       float intent_p1;   % char vox_units[4];   /* 16 + 4       */</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="stringliteral">    %       float intent_p2;   % char cal_units[8];   /* 20 + 4       */</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="stringliteral">    %       float intent_p3;   % char cal_units[8];   /* 24 + 4       */</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="stringliteral">    %       short int intent_code;   % short int unused1;   /* 28 + 2 */</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="stringliteral">    %       short int datatype;              /* 30 + 2          */</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="stringliteral">    %       short int bitpix;                /* 32 + 2          */</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="stringliteral">    %       short int slice_start;   % short int dim_un0;   /* 34 + 2 */</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="stringliteral">    %       float pixdim[8];                 /* 36 + 32         */</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="stringliteral">    %   /*</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="stringliteral">    %       pixdim[] specifies the voxel dimensions:</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="stringliteral">    %       pixdim[1] - voxel width, mm</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="stringliteral">    %       pixdim[2] - voxel height, mm</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="stringliteral">    %       pixdim[3] - slice thickness, mm</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="stringliteral">    %       pixdim[4] - volume timing, in msec</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="stringliteral">    %                   ..etc</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="stringliteral">    %   */</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="stringliteral">    %       float vox_offset;                /* 68 + 4          */</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="stringliteral">    %       float scl_slope;   % float roi_scale;     /* 72 + 4 */</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="stringliteral">    %       float scl_inter;   % float funused1;      /* 76 + 4 */</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="stringliteral">    %       short slice_end;   % float funused2;      /* 80 + 2 */</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="stringliteral">    %       char slice_code;   % float funused2;      /* 82 + 1 */</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="stringliteral">    %       char xyzt_units;   % float funused2;      /* 83 + 1 */</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="stringliteral">    %       float cal_max;                   /* 84 + 4          */</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="stringliteral">    %       float cal_min;                   /* 88 + 4          */</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="stringliteral">    %       float slice_duration;   % int compressed; /* 92 + 4 */</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="stringliteral">    %       float toffset;   % int verified;          /* 96 + 4 */</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="stringliteral">    %       int glmax;                       /* 100 + 4         */</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="stringliteral">    %       int glmin;                       /* 104 + 4         */</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="stringliteral">    %       };                               /* total=108 bytes */</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="stringliteral">    </span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="stringliteral">    dime.dim        = fread(fid,8,&#39;</span>int16<span class="charliteral">&#39;)&#39;</span>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    dime.intent_p1  = fread(<a class="code" href="load__nii__hdr_8m.html#ae0165964eaa89921fb87522169ff860c">fid</a>,1,<span class="stringliteral">&#39;float32&#39;</span>)<span class="stringliteral">&#39;;</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="stringliteral">    dime.intent_p2  = fread(fid,1,&#39;</span>float32<span class="charliteral">&#39;)&#39;</span>;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    dime.intent_p3  = fread(<a class="code" href="load__nii__hdr_8m.html#ae0165964eaa89921fb87522169ff860c">fid</a>,1,<span class="stringliteral">&#39;float32&#39;</span>)<span class="stringliteral">&#39;;</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="stringliteral">    dime.intent_code = fread(fid,1,&#39;</span>int16<span class="charliteral">&#39;)&#39;</span>;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    dime.datatype   = fread(<a class="code" href="load__nii__hdr_8m.html#ae0165964eaa89921fb87522169ff860c">fid</a>,1,<span class="stringliteral">&#39;int16&#39;</span>)<span class="stringliteral">&#39;;</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="stringliteral">    dime.bitpix     = fread(fid,1,&#39;</span>int16<span class="charliteral">&#39;)&#39;</span>;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    dime.slice_start = fread(<a class="code" href="load__nii__hdr_8m.html#ae0165964eaa89921fb87522169ff860c">fid</a>,1,<span class="stringliteral">&#39;int16&#39;</span>)<span class="stringliteral">&#39;;</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="stringliteral">    dime.pixdim     = fread(fid,8,&#39;</span>float32<span class="charliteral">&#39;)&#39;</span>;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    dime.vox_offset = fread(<a class="code" href="load__nii__hdr_8m.html#ae0165964eaa89921fb87522169ff860c">fid</a>,1,<span class="stringliteral">&#39;float32&#39;</span>)<span class="stringliteral">&#39;;</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="stringliteral">    dime.scl_slope  = fread(fid,1,&#39;</span>float32<span class="charliteral">&#39;)&#39;</span>;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    dime.scl_inter  = fread(<a class="code" href="load__nii__hdr_8m.html#ae0165964eaa89921fb87522169ff860c">fid</a>,1,<span class="stringliteral">&#39;float32&#39;</span>)<span class="stringliteral">&#39;;</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="stringliteral">    dime.slice_end  = fread(fid,1,&#39;</span>int16<span class="charliteral">&#39;)&#39;</span>;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    dime.slice_code = fread(<a class="code" href="load__nii__hdr_8m.html#ae0165964eaa89921fb87522169ff860c">fid</a>,1,<span class="stringliteral">&#39;uchar&#39;</span>)<span class="stringliteral">&#39;;</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="stringliteral">    dime.xyzt_units = fread(fid,1,&#39;</span>uchar<span class="charliteral">&#39;)&#39;</span>;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    dime.cal_max    = fread(<a class="code" href="load__nii__hdr_8m.html#ae0165964eaa89921fb87522169ff860c">fid</a>,1,<span class="stringliteral">&#39;float32&#39;</span>)<span class="stringliteral">&#39;;</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="stringliteral">    dime.cal_min    = fread(fid,1,&#39;</span>float32<span class="charliteral">&#39;)&#39;</span>;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    dime.slice_duration = fread(<a class="code" href="load__nii__hdr_8m.html#ae0165964eaa89921fb87522169ff860c">fid</a>,1,<span class="stringliteral">&#39;float32&#39;</span>)<span class="stringliteral">&#39;;</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="stringliteral">    dime.toffset    = fread(fid,1,&#39;</span>float32<span class="charliteral">&#39;)&#39;</span>;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    dime.glmax      = fread(<a class="code" href="load__nii__hdr_8m.html#ae0165964eaa89921fb87522169ff860c">fid</a>,1,<span class="stringliteral">&#39;int32&#39;</span>)<span class="stringliteral">&#39;;</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="stringliteral">    dime.glmin      = fread(fid,1,&#39;</span>int32<span class="charliteral">&#39;)&#39;</span>;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">return</span>                  % <a class="code" href="save__nii__hdr_8m.html#aac788ed813970f94c7b01b266d384f90">image_dimension</a></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;%---------------------------------------------------------------------</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<a class="code" href="emgm_8m.html#a67531ee5e31b1d1a3065cf637eae4546">function</a> [ <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a> ] = <a class="code" href="save__nii__hdr_8m.html#a70c170fbd64912553b6e420234dd01ee">data_history</a>(<a class="code" href="load__nii__hdr_8m.html#ae0165964eaa89921fb87522169ff860c">fid</a>)</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    %  Original <a class="code" href="load__untouch__nii_8m.html#a5381cdd79f39b45eb8550689cc700aac">header</a> structures</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    %  struct <a class="code" href="save__nii__hdr_8m.html#a70c170fbd64912553b6e420234dd01ee">data_history</a>       </div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    %       {                                <span class="comment">/* off + size      */</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    %       <span class="keywordtype">char</span> descrip[80];                <span class="comment">/* 0 + 80          */</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    %       <span class="keywordtype">char</span> aux_file[24];               <span class="comment">/* 80 + 24         */</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    %       <span class="keywordtype">short</span> <span class="keywordtype">int</span> <a class="code" href="reslice__nii_8m.html#a319684c14641b1e61c5abf9fa5888b97">qform_code</a>;            <span class="comment">/* 104 + 2         */</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    %       <span class="keywordtype">short</span> <span class="keywordtype">int</span> <a class="code" href="reslice__nii_8m.html#a7faa578ac30a502075bbd6528ca570a8">sform_code</a>;            <span class="comment">/* 106 + 2         */</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    %       <span class="keywordtype">float</span> quatern_b;                 <span class="comment">/* 108 + 4         */</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    %       <span class="keywordtype">float</span> quatern_c;                 <span class="comment">/* 112 + 4         */</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    %       <span class="keywordtype">float</span> quatern_d;                 <span class="comment">/* 116 + 4         */</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    %       <span class="keywordtype">float</span> qoffset_x;                 <span class="comment">/* 120 + 4         */</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    %       <span class="keywordtype">float</span> qoffset_y;                 <span class="comment">/* 124 + 4         */</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    %       <span class="keywordtype">float</span> qoffset_z;                 <span class="comment">/* 128 + 4         */</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    %       <span class="keywordtype">float</span> <a class="code" href="reslice__nii_8m.html#afaec44be68b4dd7d69cd18070f541993">srow_x</a>[4];                 <span class="comment">/* 132 + 16        */</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    %       <span class="keywordtype">float</span> <a class="code" href="reslice__nii_8m.html#a83e89a30b9d250f312ba7c0ee122ead8">srow_y</a>[4];                 <span class="comment">/* 148 + 16        */</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    %       <span class="keywordtype">float</span> <a class="code" href="reslice__nii_8m.html#a448a15a66934cebb54a54153e3fe6ba9">srow_z</a>[4];                 <span class="comment">/* 164 + 16        */</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    %       <span class="keywordtype">char</span> intent_name[16];            <span class="comment">/* 180 + 16        */</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    %       <span class="keywordtype">char</span> magic[4];   % <span class="keywordtype">int</span> smin;     <span class="comment">/* 196 + 4         */</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    %       };                               <span class="comment">/* total=200 bytes */</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    v6 = version;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keywordflow">if</span> str2num(v6(1))&lt;6</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;       directchar = <span class="stringliteral">&#39;*char&#39;</span>;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;       directchar = <span class="stringliteral">&#39;uchar=&gt;char&#39;</span>;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <a class="code" href="load__nii__img_8m.html#a0e58fe5bf1f468ebd8ae6b3620a52472">end</a></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.descrip     = deblank(fread(<a class="code" href="load__nii__hdr_8m.html#ae0165964eaa89921fb87522169ff860c">fid</a>,80,directchar)<span class="stringliteral">&#39;);</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="stringliteral">    hist.aux_file    = deblank(fread(fid,24,directchar)&#39;</span>);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.qform_code  = fread(<a class="code" href="load__nii__hdr_8m.html#ae0165964eaa89921fb87522169ff860c">fid</a>,1,<span class="stringliteral">&#39;int16&#39;</span>)<span class="stringliteral">&#39;;</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="stringliteral">    hist.sform_code  = fread(fid,1,&#39;</span>int16<span class="charliteral">&#39;)&#39;</span>;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.quatern_b   = fread(<a class="code" href="load__nii__hdr_8m.html#ae0165964eaa89921fb87522169ff860c">fid</a>,1,<span class="stringliteral">&#39;float32&#39;</span>)<span class="stringliteral">&#39;;</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="stringliteral">    hist.quatern_c   = fread(fid,1,&#39;</span>float32<span class="charliteral">&#39;)&#39;</span>;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.quatern_d   = fread(<a class="code" href="load__nii__hdr_8m.html#ae0165964eaa89921fb87522169ff860c">fid</a>,1,<span class="stringliteral">&#39;float32&#39;</span>)<span class="stringliteral">&#39;;</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="stringliteral">    hist.qoffset_x   = fread(fid,1,&#39;</span>float32<span class="charliteral">&#39;)&#39;</span>;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.qoffset_y   = fread(<a class="code" href="load__nii__hdr_8m.html#ae0165964eaa89921fb87522169ff860c">fid</a>,1,<span class="stringliteral">&#39;float32&#39;</span>)<span class="stringliteral">&#39;;</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="stringliteral">    hist.qoffset_z   = fread(fid,1,&#39;</span>float32<span class="charliteral">&#39;)&#39;</span>;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.srow_x      = fread(<a class="code" href="load__nii__hdr_8m.html#ae0165964eaa89921fb87522169ff860c">fid</a>,4,<span class="stringliteral">&#39;float32&#39;</span>)<span class="stringliteral">&#39;;</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="stringliteral">    hist.srow_y      = fread(fid,4,&#39;</span>float32<span class="charliteral">&#39;)&#39;</span>;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.srow_z      = fread(<a class="code" href="load__nii__hdr_8m.html#ae0165964eaa89921fb87522169ff860c">fid</a>,4,<span class="stringliteral">&#39;float32&#39;</span>)<span class="stringliteral">&#39;;</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="stringliteral">    hist.intent_name = deblank(fread(fid,16,directchar)&#39;</span>);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <a class="code" href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a>.magic       = deblank(fread(<a class="code" href="load__nii__hdr_8m.html#ae0165964eaa89921fb87522169ff860c">fid</a>,4,directchar)<span class="stringliteral">&#39;);</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="stringliteral">    fseek(fid,253,&#39;</span>bof<span class="stringliteral">&#39;);</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="stringliteral">    hist.originator  = fread(fid, 5,&#39;</span>int16<span class="charliteral">&#39;)&#39;</span>;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordflow">return</span>                  % <a class="code" href="save__nii__hdr_8m.html#a70c170fbd64912553b6e420234dd01ee">data_history</a></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div>
<div class="ttc" id="hellier__hist__normalization__gmm_8m_html_ab66251c08e0241221a1f306f8c4760f5"><div class="ttname"><a href="hellier__hist__normalization__gmm_8m.html#ab66251c08e0241221a1f306f8c4760f5">if</a></div><div class="ttdeci">Check the ordering of the means if(mu_i_first_subset&lt; mu_i_second_subset &amp;mu_i_first_subset&lt; mu_i_third_subset) disp('The first Gaussian is the CSF')</div></div>
<div class="ttc" id="load__lbeig_8m_html_a1af5497f0d80ec2d3e57945765f73d8c"><div class="ttname"><a href="load__lbeig_8m.html#a1af5497f0d80ec2d3e57945765f73d8c">s</a></div><div class="ttdeci">s</div><div class="ttdef"><b>Definition:</b> <a href="load__lbeig_8m_source.html#l00005">load_lbeig.m:5</a></div></div>
<div class="ttc" id="load__nii__hdr_8m_html_ae0165964eaa89921fb87522169ff860c"><div class="ttname"><a href="load__nii__hdr_8m.html#ae0165964eaa89921fb87522169ff860c">fid</a></div><div class="ttdeci">end end fid</div><div class="ttdef"><b>Definition:</b> <a href="load__nii__hdr_8m_source.html#l00043">load_nii_hdr.m:43</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_afaec44be68b4dd7d69cd18070f541993"><div class="ttname"><a href="reslice__nii_8m.html#afaec44be68b4dd7d69cd18070f541993">srow_x</a></div><div class="ttdeci">nii hdr hist srow_x</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00122">reslice_nii.m:122</a></div></div>
<div class="ttc" id="save__nii__hdr_8m_html_aac788ed813970f94c7b01b266d384f90"><div class="ttname"><a href="save__nii__hdr_8m.html#aac788ed813970f94c7b01b266d384f90">image_dimension</a></div><div class="ttdeci">image_dimension(fid, hdr.dime)</div></div>
<div class="ttc" id="reslice__nii_8m_html_a5f512d455013d953e6018dee349e78f6"><div class="ttname"><a href="reslice__nii_8m.html#a5f512d455013d953e6018dee349e78f6">else</a></div><div class="ttdeci">end else[img M]</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00109">reslice_nii.m:109</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_a319684c14641b1e61c5abf9fa5888b97"><div class="ttname"><a href="reslice__nii_8m.html#a319684c14641b1e61c5abf9fa5888b97">qform_code</a></div><div class="ttdeci">nii hdr hist qform_code</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00120">reslice_nii.m:120</a></div></div>
<div class="ttc" id="hellier__hist__normalization__gmm_8m_html_a61c2a47b64784151e1719e8205833341"><div class="ttname"><a href="hellier__hist__normalization__gmm_8m.html#a61c2a47b64784151e1719e8205833341">elseif</a></div><div class="ttdeci">end elseif(mu_i_first_subset &gt; mu_i_second_subset &amp;mu_i_first_subset &gt; mu_i_third_subset) disp('The first Gaussian is the WM')</div></div>
<div class="ttc" id="hellier__hist__normalization__gmm_8m_html_ab731fd3d331f10ec6151c2897aed450a"><div class="ttname"><a href="hellier__hist__normalization__gmm_8m.html#ab731fd3d331f10ec6151c2897aed450a">hist</a></div><div class="ttdeci">hist(cleaned_converted_data, max_value)</div></div>
<div class="ttc" id="reslice__nii_8m_html_a83e89a30b9d250f312ba7c0ee122ead8"><div class="ttname"><a href="reslice__nii_8m.html#a83e89a30b9d250f312ba7c0ee122ead8">srow_y</a></div><div class="ttdeci">nii hdr hist srow_y</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00123">reslice_nii.m:123</a></div></div>
<div class="ttc" id="save__untouch__slice_8m_html_a1443276242125c55cd52bf7f28d26ed2"><div class="ttname"><a href="save__untouch__slice_8m.html#a1443276242125c55cd52bf7f28d26ed2">fopen</a></div><div class="ttdeci">fn,'r+', machine fopen()</div></div>
<div class="ttc" id="load__nii__hdr_8m_html_a4c109e7c229fc3ea83555deee5c709d4"><div class="ttname"><a href="load__nii__hdr_8m.html#a4c109e7c229fc3ea83555deee5c709d4">findstr</a></div><div class="ttdeci">if findstr('.nii', fileprefix) new _ext</div></div>
<div class="ttc" id="save__untouch__nii_8m_html_a97ee6abe7d21ae63d3399f62a2abd639"><div class="ttname"><a href="save__untouch__nii_8m.html#a97ee6abe7d21ae63d3399f62a2abd639">case</a></div><div class="ttdeci">end switch case</div><div class="ttdef"><b>Definition:</b> <a href="save__untouch__nii_8m_source.html#l00065">save_untouch_nii.m:65</a></div></div>
<div class="ttc" id="load__untouch__nii_8m_html_a7a6151189c42255ed2727c0c65bd8860"><div class="ttname"><a href="load__untouch__nii_8m.html#a7a6151189c42255ed2727c0c65bd8860">filetype</a></div><div class="ttdeci">if nii filetype</div><div class="ttdef"><b>Definition:</b> <a href="load__untouch__nii_8m_source.html#l00105">load_untouch_nii.m:105</a></div></div>
<div class="ttc" id="save__nii__hdr_8m_html_ab048745b66ac1019388ee1c99db4e9d7"><div class="ttname"><a href="save__nii__hdr_8m.html#ab048745b66ac1019388ee1c99db4e9d7">fseek</a></div><div class="ttdeci">fid, 0,'bof' fseek()</div></div>
<div class="ttc" id="load__untouch__nii_8m_html_a8b8a3e900ea103e208ebc3030395c227"><div class="ttname"><a href="load__untouch__nii_8m.html#a8b8a3e900ea103e208ebc3030395c227">Usage</a></div><div class="ttdeci">Load NIFTI or ANALYZE but not applying any appropriate affine geometric transform or voxel intensity scaling Although according to NIFTI all those header information are supposed to be applied to the loaded NIFTI there are some situations that people do want to leave the original NIFTI header and data untouched They will probably just use MATLAB to do certain image processing regardless of image and to save data back with the same NIfTI header Since this program is only served for those please use it together with save_untouch_nii and do not use save_nii m or view_nii m for the data that is loaded by load_untouch_nii m For normal you should use load_nii m instead Usage</div><div class="ttdef"><b>Definition:</b> <a href="load__untouch__nii_8m_source.html#l00001">load_untouch_nii.m:1</a></div></div>
<div class="ttc" id="save__nii__hdr_8m_html_a70c170fbd64912553b6e420234dd01ee"><div class="ttname"><a href="save__nii__hdr_8m.html#a70c170fbd64912553b6e420234dd01ee">data_history</a></div><div class="ttdeci">data_history(fid, hdr.hist)</div></div>
<div class="ttc" id="load__nii__hdr_8m_html_aff247e90c6608215c92679f8aa390e10"><div class="ttname"><a href="load__nii__hdr_8m.html#aff247e90c6608215c92679f8aa390e10">fileprefix</a></div><div class="ttdeci">fileprefix</div><div class="ttdef"><b>Definition:</b> <a href="load__nii__hdr_8m_source.html#l00016">load_nii_hdr.m:16</a></div></div>
<div class="ttc" id="save__nii__hdr_8m_html_abe25a0a67ab3a020254ee96cb3a360d5"><div class="ttname"><a href="save__nii__hdr_8m.html#abe25a0a67ab3a020254ee96cb3a360d5">msg</a></div><div class="ttdeci">if msg</div><div class="ttdef"><b>Definition:</b> <a href="save__nii__hdr_8m_source.html#l00056">save_nii_hdr.m:56</a></div></div>
<div class="ttc" id="load__untouch__nii_8m_html_a5381cdd79f39b45eb8550689cc700aac"><div class="ttname"><a href="load__untouch__nii_8m.html#a5381cdd79f39b45eb8550689cc700aac">header</a></div><div class="ttdeci">end Read the dataset header[nii.hdr, nii.filetype, nii.fileprefix, nii.machine]</div><div class="ttdef"><b>Definition:</b> <a href="load__untouch__nii_8m_source.html#l00103">load_untouch_nii.m:103</a></div></div>
<div class="ttc" id="emgm_8m_html_a67531ee5e31b1d1a3065cf637eae4546"><div class="ttname"><a href="emgm_8m.html#a67531ee5e31b1d1a3065cf637eae4546">function</a></div><div class="ttdeci">function[label, model, llh]</div><div class="ttdef"><b>Definition:</b> <a href="emgm_8m_source.html#l00001">emgm.m:1</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_a7faa578ac30a502075bbd6528ca570a8"><div class="ttname"><a href="reslice__nii_8m.html#a7faa578ac30a502075bbd6528ca570a8">sform_code</a></div><div class="ttdeci">nii hdr hist sform_code</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00121">reslice_nii.m:121</a></div></div>
<div class="ttc" id="hellier__hist__normalization__gmm_8m_html_a0e59908ff00ce07861ead56d41e8e8b3"><div class="ttname"><a href="hellier__hist__normalization__gmm_8m.html#a0e59908ff00ce07861ead56d41e8e8b3">and</a></div><div class="ttdeci">absolute max value DATA DEPENDENT PARAMENTER Not extremely critical but they need to be the data are normalized between and</div><div class="ttdef"><b>Definition:</b> <a href="hellier__hist__normalization__gmm_8m_source.html#l00031">hellier_hist_normalization_gmm.m:31</a></div></div>
<div class="ttc" id="load__nii__hdr_8m_html_a42464a15ef9d72963e0b452599c249c5"><div class="ttname"><a href="load__nii__hdr_8m.html#a42464a15ef9d72963e0b452599c249c5">error</a></div><div class="ttdeci">'Usage:[hdr, filetype, fileprefix, machine]=load_nii_hdr(filename error()</div></div>
<div class="ttc" id="reslice__nii_8m_html_a448a15a66934cebb54a54153e3fe6ba9"><div class="ttname"><a href="reslice__nii_8m.html#a448a15a66934cebb54a54153e3fe6ba9">srow_z</a></div><div class="ttdeci">nii hdr hist srow_z</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00124">reslice_nii.m:124</a></div></div>
<div class="ttc" id="load__nii__hdr_8m_html_aaf383c3250b5ce4774d65bd6d4bd8809"><div class="ttname"><a href="load__nii__hdr_8m.html#aaf383c3250b5ce4774d65bd6d4bd8809">machine</a></div><div class="ttdeci">end machine</div><div class="ttdef"><b>Definition:</b> <a href="load__nii__hdr_8m_source.html#l00011">load_nii_hdr.m:11</a></div></div>
<div class="ttc" id="xform__nii_8m_html_ab532f211a59e750f5f2657bc5e2172ab"><div class="ttname"><a href="xform__nii_8m.html#ab532f211a59e750f5f2657bc5e2172ab">that</a></div><div class="ttdeci">after we figure out the angles and squash them to closest rectilinear direction After that</div><div class="ttdef"><b>Definition:</b> <a href="xform__nii_8m_source.html#l00389">xform_nii.m:389</a></div></div>
<div class="ttc" id="load__untouch__nii_8m_html_a74f9730f486be70373c812d488936dc9"><div class="ttname"><a href="load__untouch__nii_8m.html#a74f9730f486be70373c812d488936dc9">hdr</a></div><div class="ttdeci">else nii hdr</div><div class="ttdef"><b>Definition:</b> <a href="load__untouch__nii_8m_source.html#l00109">load_untouch_nii.m:109</a></div></div>
<div class="ttc" id="hellier__hist__normalization__gmm_8m_html_adc359efc23ea39d0411c481c3123f64b"><div class="ttname"><a href="hellier__hist__normalization__gmm_8m.html#adc359efc23ea39d0411c481c3123f64b">img</a></div><div class="ttdeci">template img</div><div class="ttdef"><b>Definition:</b> <a href="hellier__hist__normalization__gmm_8m_source.html#l00042">hellier_hist_normalization_gmm.m:42</a></div></div>
<div class="ttc" id="load__nii__hdr_8m_html_a6dd2769f1241ed9a4f806f5378b68038"><div class="ttname"><a href="load__nii__hdr_8m.html#a6dd2769f1241ed9a4f806f5378b68038">fn</a></div><div class="ttdeci">end if new_ext fn</div><div class="ttdef"><b>Definition:</b> <a href="load__nii__hdr_8m_source.html#l00028">load_nii_hdr.m:28</a></div></div>
<div class="ttc" id="load__untouch__nii_8m_html_ad687cafb469fa0ea5f34a64e7eb84ec5"><div class="ttname"><a href="load__untouch__nii_8m.html#ad687cafb469fa0ea5f34a64e7eb84ec5">nii</a></div><div class="ttdeci">Perform some of sform qform transform nii</div><div class="ttdef"><b>Definition:</b> <a href="load__untouch__nii_8m_source.html#l00123">load_untouch_nii.m:123</a></div></div>
<div class="ttc" id="load__untouch0__nii__hdr_8m_html_afe8cde1eb93bd291a31f293e240100cb"><div class="ttname"><a href="load__untouch0__nii__hdr_8m.html#afe8cde1eb93bd291a31f293e240100cb">sprintf</a></div><div class="ttdeci">'%s.hdr', fileprefix sprintf()</div></div>
<div class="ttc" id="save__nii__hdr_8m_html_a9c96a3b4c3f05721e8b427885ecbea85"><div class="ttname"><a href="save__nii__hdr_8m.html#a9c96a3b4c3f05721e8b427885ecbea85">header_key</a></div><div class="ttdeci">header_key(fid, hdr.hk)</div></div>
<div class="ttc" id="save__untouch__slice_8m_html_a74863b270c5b27ac757677777601e8d8"><div class="ttname"><a href="save__untouch__slice_8m.html#a74863b270c5b27ac757677777601e8d8">filename</a></div><div class="ttdeci">Save back to the back to the original image a portion of slices that were loaded by load_untouch_nii You can process those slices matrix in any as long as their dimension is not changed filename</div><div class="ttdef"><b>Definition:</b> <a href="save__untouch__slice_8m_source.html#l00003">save_untouch_slice.m:3</a></div></div>
<div class="ttc" id="save__nii__hdr_8m_html_abeca945d0a8dd386ad1188ecb9a82910"><div class="ttname"><a href="save__nii__hdr_8m.html#abeca945d0a8dd386ad1188ecb9a82910">dsr</a></div><div class="ttdeci">hdr, fid dsr()</div><div class="ttdef"><b>Definition:</b> <a href="save__nii__hdr_8m_source.html#l00036">save_nii_hdr.m:36</a></div></div>
<div class="ttc" id="reslice__nii_8m_html_a20e1746bf8fab881987958cd24f9cf6f"><div class="ttname"><a href="reslice__nii_8m.html#a20e1746bf8fab881987958cd24f9cf6f">return</a></div><div class="ttdeci">return</div><div class="ttdef"><b>Definition:</b> <a href="reslice__nii_8m_source.html#l00129">reslice_nii.m:129</a></div></div>
<div class="ttc" id="load__nii__hdr_8m_html_a66140e6beb38dc2e74f8cb093a013e09"><div class="ttname"><a href="load__nii__hdr_8m.html#a66140e6beb38dc2e74f8cb093a013e09">new_ext</a></div><div class="ttdeci">new_ext</div><div class="ttdef"><b>Definition:</b> <a href="load__nii__hdr_8m_source.html#l00012">load_nii_hdr.m:12</a></div></div>
<div class="ttc" id="load__nii__img_8m_html_a0e58fe5bf1f468ebd8ae6b3620a52472"><div class="ttname"><a href="load__nii__img_8m.html#a0e58fe5bf1f468ebd8ae6b3620a52472">end</a></div><div class="ttdeci">end end[img, hdr]</div><div class="ttdef"><b>Definition:</b> <a href="load__nii__img_8m_source.html#l00115">load_nii_img.m:115</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 11 2014 15:55:49 for ANIMA by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
